<!doctype html>
<html lang="en">

<head>
    <!-- Meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>PFP3</title>

    <!-- Bootstrap CSS (light mode) -->
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">  -->

    <!-- DARK MODE -->
    <!-- SOURCE:  https://github.com/vinorodrigues/bootstrap-dark-5 -->
    <!-- Bootstrap CSS (dark mode) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-dark-5@0.1/dist/css/bootstrap-night.min.css" rel="stylesheet">

    <!-- The page supports only a dark color schemes -->
    <meta name="color-scheme" content="dark">


    <!-- Favicon and app icons, generated by realfavicongenerator.net -->
    <!-- NOTE:  Change  /images/  to  images/  so it works locally as well -->
    <!-- REFERENCE:  https://stackoverflow.com/a/13780457/1263035 -->
    <link rel="apple-touch-icon" sizes="180x180" href="images/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/icons/favicon-16x16.png">
    <link rel="manifest" href="images/icons/site.webmanifest">
    <link rel="mask-icon" href="images/icons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="images/icons/favicon.ico">
    <meta name="msapplication-TileColor" content="#603cba">
    <meta name="msapplication-config" content="images/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">




    <!-- My CSS -->
    <style>
        /* Hide these (ids) until shown */
        /* I'm also adding a class to these, to default them to hidden when Reset is pressed, and so I don't have to keep adding each id */
        .startHidden,
        #expandPold,
        #resultsBoxContainer,
        #inputHiddenWireLength,
        #hiddenWireHelp,
        #selectSplitSystem {
            display: none;
        }

        .resultsBoxContainer {
            max-width: 600px;
            /* Setting div to 3.5in width works for html2pdf */
            /* width: 3.5in; */
            /* Setting div to 4x6 for printing didn't seem to work as expected */
            /* width: 4in; */
            /* height: 6in; */
        }

        /* Hide the SO# on boxes beyond the first, in the results window, until you print */
        .soBox {
            display: none;
        }


        /* Page break after each new box */
        /* HISTORY:  Pulled this out of @media print so it works with html2pdf as well */
        /* NOTE:  Added newBoxBefore1 and newBoxBefore2 to fix html2pdf inserting the page break in wrong location (issue with nested divs) */
        .newBoxBefore2 {
            /* page-break-before replaced by break-before (change 'always' to 'page'*/
            /* page-break-before: always; */
            break-before: page;
            /* margin-top: 20px; */
        }

        /* TODO:  Make placeholder divs smaller so they don't create big gaps? */
        /* .newBoxBefore1,
        .newBoxBefore2 {
            height: 10px;
        } */





        /*  PRINT OPTIONS (onprint) */
        @media print {

            /* Show the SO# on boxes beyond the first when you print */
            /* Unhide the divs used for making page breaks (compatible with html2pdf) */
            /* .soBox, .newBoxBefore1, .newBoxBefore2 { */
            .soBox {
                display: block;
            }

            /* Hide the weights when printing */
            .weightCurrentBox {
                display: none;
            }

            /*  Defines colors for printing as: white background, black text */
            /*  HISTORY:  It was printing with gray text as default in dark mode*/
            /*  HISTORY:  Color was not working on <pre> text until i changed .pre to pre (duh, it's not a class) */
            .resultsBoxContainer,
            pre,
            html,
            body,
            .newBox,
            .container,
            .container-sm {
                color: black;
                background-color: white;
            }

            @page {
                color: black;
                background-color: white;
            }



            /* FUNCTION:  Hide the added header/footer page details that get printed by browser */
            /* This is done by making a 0 or negative margin on the print version of the page,
            which overrides the headers/footers added in the margins by the browser,
            you then add margin back to the html element.
            The downside is pages beyond the first won't be styled correctly, 
            so i added margin on my divs specific to the results box */
            /* SOURCE:  https://stackoverflow.com/a/38506980 */
            @page {
                margin: 0 0cm
            }

            html {
                margin: 0cm 0cm
            }

            /* Fixes the page if it's firefox */
            /* Not really an issue now. 0 padding seems to be working in chrome, firefox, and edge. */
            /* @-moz-document url-prefix() {
                @page {
                    margin: 0 0cm
                }
            } */

            /* Fixes the page if it's firefox */
            /* @-moz-document url-prefix() {
                html {
                    margin: 0cm 0cm
                }
            } */

            /* Margin added to results divs to make pages after the first not hit the edge of page */
            .resultsBoxContainer {
                /* margin: 2cm 2cm; */
                padding-top: 20px;
                /* margin-right: 20px; */
                /* margin-bottom: 20px; */
                padding-left: 20px;
            }

            /* Margin added to results divs to make pages after the first not hit the edge of page */
            .newBox {
                /* margin: 2cm 2cm; */
                padding-top: 20px;
                /* margin-right: 20px; */
                /* margin-bottom: 20px; */
                /* margin-left: 20px; */
            }

            /* Adding elements with bootstrap d-print-none class added, so external stylesheet for html2pdf works */
            .d-print-none {
                display: none;
            }

        }
    </style>



</head>

<body id="body">



    <div class="container">

        <!-- Header -->
        <div class="row" id="pageTitle">
            <div class="col-md my-3">
                <h1 class="text-center">Packing for Peanuts</h1>
            </div>
        </div>
        <!--   -->








        <!-- FUNCTION:  Show results upon form submit (and hide rest of page) -->
        <!-- Start hidden, only show after hitting submit  -->
        <!-- TITLE:  Results box -->
        <div class="startHidden resultsBoxContainer" id="resultsBoxContainer">
            <!-- Don't show title during print -->
            <div class="row resultsBoxTitle d-print-none" id="resultsBoxTitle">
                <div class="col-md my-3">
                    <h2>Packing Results:</h2>
                </div>
            </div>
            <div class="row">
                <!-- NOTE:  The text here is sent from javascript using <br /> line breaks -->
                <div class="col-md mb-3 resultsBox" id="resultsBox">
                    Sample
                </div>
            </div>
            <!-- TIP:  Boostrap class  .d-print-none  hides this during printing-->
            <!-- REFERENCE:  https://stackoverflow.com/a/36352263 -->
            <!-- REFERENCE:  https://getbootstrap.com/docs/5.0/utilities/display/#display-in-print -->
            <div class="row d-print-none">
                <form id="resultsForm">
                    <!-- FORM FOOTER -->
                    <div class="row mb-3">
                        <div class="col">
                            <!-- FUNCTION:  Back button (calls the showMainPage function which inverts the display of elements shown/hidden by the showResults function) -->
                            <!-- TIP:  Align right with float-end -->
                            <!-- Source for arrows:  https://www.calculators.org/math/html-arrows.php -->
                            <button type="button" class="btn btn-secondary mb-1 backButton" id="backButton">‚Üê Go
                                Back &nbsp;</button>
                            <!-- FUNCTION:  This "submit" button isn't actually submitting anything, but it refreshes the page on submit, which is the goal  -->
                            <!-- TODO:  Maybe change this from a submit button to a refresh page button (like my custom reset button). No real reason to as of now though -->
                            <!-- TIP:  Align right with float-end -->
                            <button type="submit" class="btn btn-warning mb-1 float-left submitButton"
                                id="resultsSubmitButton">‚Ü∫ Start Over &nbsp;</button>
                        </div>

                        <div class="col">
                            <!-- FUNCTION:  Print button -->
                            <!-- TIP:  Align right with float-end or float-right-->
                            <!-- reordered these buttons since the first floats to the end/right -->
                            <!-- removed  onClick="window.print()"  and moved it to the SO# validation function upon clicking print -->
                            <input type="button" class="btn btn-primary mb-1 mx-1 float-end printButton"
                                id="printButton" value="‚éô Print">

                            <!-- FUNCTION:  Save pdf button (using html2pdf, in scripts) -->
                            <input type="button" class="btn btn-secondary mb-1 mx-1 float-end printButton"
                                id="saveButton" value="üñ´ Save">
                        </div>
                    </div>
                </form>
            </div>
        </div>














        <!-- To toggle a class of divs shown/hidden (without issues), don't use bootstrap collapse (which alternates toggled elements), just use display:none / block

        <!-- 
        To make other sections collapse when one expands:
        For Bootstrap5      Add the  data-bs-parent="#customParentID"  attribute to the collapse elements instead of the button.
        https://stackoverflow.com/questions/11476670/bootstrap-collapse-other-sections-when-one-is-expanded
        -->
        <!-- TIP:  My non-bootstrap  class="startHidden"  to start hidden -->
        <!-- TIP:  Bootstrap  class="collapse"  to start hidden,  class="collapse.show"  to start shown  (i'm not using collapse anymore)-->
        <!-- TODO:  Hide/collapse all of this group before showing parts of the group. might need to remove data bs toggle true and parent -->
        <!-- BUG:  Adding gap on parent div requires me to click a button twice for it to show content the first time... -->
        <!-- HISTORY:  I was trying to use the bootstrap 5 collapse command, but it wouldn't let me hide everything i want before showing only what I want -->
        <!--  it would only toggle states, so half of the ones you want to show would disappear if there was overlap and you clicked a different button -->
        <!--  so I switched to HTML+Javascript  display='none'  and display=''  (to reset it to showing)  -->
        <!--  (might have to invert this if i don't want everything showing at the start. maybe set it to block or inline instead of ''?) -->
        <!-- REFERENCE:  https://www.w3schools.com/howto/howto_js_toggle_hide_show.asp -->

        <!-- BEHAVIOR:  onclick, it runs the javascript function  collapseGroup, and sends the name of the group/class to expand as an argument -->
        <!-- TIP:  Add a class name (like groupLds) to every element in a group you want shown (when clicking a header button), since comma-separated IDs didn't work -->

        <!-- BEHAVIOR:  onsubmit="return false"  was added to prevent the page refresh on submit, so I can show the results -->
        <!-- REFERENCE:  https://stackoverflow.com/a/57226770 -->
        <!-- TODO:  Add a Reset/Continue/Clear/Start Over button to the results (as well as a Print button, defaulting to 4x6 and zebra printer) -->

        <form id="mainForm" onsubmit="return false">
            <div id="wizard1">
                <div class="row mb-4">
                    <div class="btn-group" role="group" aria-label="Select type of system being sent">

                        <!-- HISTORY:  To set one to default true/active, add  checked  somewhere. Adding  class="active"  didn't work -->
                        <!-- REFERENCE:  https://getbootstrap.com/docs/5.0/components/button-group/#checkbox-and-radio-button-groups -->
                        <!-- System: LDS Valve  radio button-->
                        <!-- <input type="radio" class="btn-check active" checked name="btnradio" id="btnradio1" -->
                        <input type="radio" class="btn-check" name="btnradio" id="btnradio1" data-bs-toggle="true"
                            onclick="collapseGroup('groupLds')" autocomplete="off" aria-expanded="true"
                            aria-controls=".groupLds" value="1">
                        <label class="btn btn-primary" for="btnradio1">System:&nbsp; LDS Valve</label>

                        <!-- System: POLD-Only  radio button -->
                        <input type="radio" class="btn-check" name="btnradio" id="btnradio2" data-bs-toggle="false"
                            onclick="collapseGroup('groupPoldOnly'); setLds(0);" autocomplete="off"
                            aria-expanded="false" aria-controls=".groupPoldOnly" value="2">
                        <label class="btn btn-primary" for="btnradio2">System:&nbsp; POLD-Only</label>

                        <!-- Accessories Only  radio button -->
                        <input type="radio" class="btn-check" name="btnradio" id="btnradio3" data-bs-toggle="false"
                            onclick="collapseGroup('groupAccessories'); setLds(0);" autocomplete="off"
                            aria-expanded="false" aria-controls=".groupAccessories" value="3">
                        <label class="btn btn-primary" for="btnradio3">Accessories Only</label>
                    </div>
                </div>
                <!-- Everything with class  groupWizard1  gets hidden first, upon header click  (like it's the 1st wizard step) -->
                <div class="row mb-4 groupWizard1">
                    <p class="text-center">Select one of the 3 options above to start.</p>
                </div>




                <!-- FUNCTION:  Wrap everything in a  startHidden  div to start collapsed before showing with top 3 toggles  (div 1 of 2)-->
                <div class="startHidden showOnHeaderClick">


                    <!-- SYSTEM: LDS -->
                    <!-- TODO:  Change class collapse.show to collapse to hide by default after programming/testing is done -->
                    <!-- TIP:  Change class="row collapse  back to  class="row collapse.show  to start shown on page load -->
                    <div class="row collapse.show groupWizard1 ldsBox groupLds groupAccessories" id="ldsBox">

                        <!-- TODO:  form class="mx-3" but make it actually work to shrink the box on the right end as well instead of overflow -->
                        <!-- Example from:  https://getbootstrap.com/docs/5.0/forms/overview/ -->


                        <!-- These group div classes are to hide or show certain divs depending on which header button is selected -->
                        <div class="row groupWizard1 groupLds groupAccessories">
                            <div class="col groupWizard1 groupLds">
                                <!--  TODO:  Change valueLds to number of LDS, then add valueLdsSize for size? (hardcoded to 1 LDS in scripts) -->
                                <label for="selectLds" class="form-label">LDS Valve Size</label>
                                <!-- Auto-include SCV of same size -->
                                <!-- Auto-include CP, 12V PSU -->
                                <select class="form-select" id="selectLds">
                                    <option selected></option>
                                    <option value="0.75">0.75"</option>
                                    <option value="1.00">1.00"</option>
                                    <option value="1.25">1.25"</option>
                                    <option value="1.50">1.50"</option>
                                    <option value="2.00">2.00"</option>
                                    <option value="2.50">2.50"</option>
                                    <option value="3.00">3.00"</option>
                                </select>
                            </div>
                            <div class="col groupWizard1 groupLds groupAccessories">
                                <label for="inputScv" class="form-label"><i>Spring Check Valve</i></label>
                                <input type="number" class="form-control" id="inputScv" aria-describedby="scvHelp">
                            </div>
                        </div>


                        <!-- Split system -->
                        <div class="row">
                            <div class="col mt-2 groupWizard1 groupLds">
                                <!-- Split system checkbox -->
                                <div class="form-check">
                                    <!-- Supposed to have  form-check  class on parent div, but that puts checkbox on left. Remove if you want checkbox on right -->
                                    <label for="checkSplitSystem" class="form-label mx-3">Split System</label>
                                    <!-- TODO:  Align checkbox right (keeping text and div section on left) -->
                                    <input type="checkbox" class="form-check-input mx-1" id="checkSplitSystem">
                                </div>
                            </div>
                            <!-- Spring Check Valve description -->
                            <div class="col mb-2">
                                <div id="scvHelp" class="form-text"><i>1 is included with an LDS by default.</i></div>
                            </div>
                        </div>
                        <!-- Split system dropdown -->
                        <div class="row mb-2">
                            <div class="col">
                                <!--  TODO:  Change valueLds to number of LDS, then add valueLdsSize for size? (hardcoded to 1 LDS in scripts) -->
                                <!-- <label for="selectSplitSystem" class="form-label">Split System Size</label> -->
                                <!-- Auto-include SCV of same size -->
                                <!-- Auto-include CP, 12V PSU -->
                                <select class="form-select startHidden mb-2" id="selectSplitSystem">
                                    <option selected></option>
                                    <option value="1">B1</option>
                                    <option value="2">B2</option>
                                    <option value="3">B3 (rules not finished)</option>
                                </select>
                            </div>
                            <div class="col">
                            </div>
                        </div>

                    </div>




                    <!-- SYSTEM: POLD-ONLY -->

                    <!-- Control Panel -->
                    <div class="row collapse.show groupWizard1 poldOnlyBox groupLds groupPoldOnly groupAccessories"
                        id="poldOnlyBox">
                        <div class="mb-3">
                            <label for="inputCp" class="form-label">Control Panel</label>
                            <input type="number" class="form-control" id="inputCp">
                        </div>
                    </div>

                    <!-- Hidden Wire -->
                    <!-- TODO:  Checkbox checked state not visible when using chrome dark mode extension -->
                    <!-- Supposed to have  form-check  class on parent div, but that puts checkbox on left. Remove if you want checkbox on right -->
                    <div class="row mb-4">
                        <div class="mb-0 form-check">
                            <label for="checkHiddenWire" class="form-label mx-3">Hidden Power Wire (Control
                                Panel)</label>
                            <!-- TODO:  Align checkbox right (keeping text and div section on left) -->
                            <input type="checkbox" class="form-check-input mx-1" id="checkHiddenWire">
                            <input type="number" class="form-control startHidden" value="10" id="inputHiddenWireLength">
                            <div id="hiddenWireHelp" class="form-text startHidden"><i>Ft.</i></div>
                        </div>
                    </div>



                    <!-- ACCESSORIES -->
                    <div class="row collapse.show groupWizard1 accessoriesBox groupLds groupPoldOnly groupAccessories"
                        id="accessoriesBox">


                        <!-- Instruction text -->
                        <!-- font-weight-bold isn't working... -->
                        <div class="mt-3 mb-3 font-weight-bold"><b>Enter the amount of each accessory:</b></div>

                        <!-- API -->
                        <div class="mb-3">
                            <!-- value="1" to default to 1. min="0" max="30" for min and max -->
                            <label for="inputApi" class="form-label">APIs</label>
                            <input type="number" class="form-control" id="inputApi" min="0" max="30"
                                aria-describedby="apiHelp">
                            <div id="apiHelp" class="form-text"><i>Maximum of 30.</i></div>
                        </div>

                        <!-- POLDs -->
                        <!-- div class mb-3 is margin-bottom -->
                        <!-- Used mx-0 to fix this bootstrap row from sliding to the left -->
                        <!-- REFERENCE:  https://getbootstrap.com/docs/4.0/layout/grid/ -->
                        <!--   "Columns have horizontal padding to create the gutters between individual columns,""  -->
                        <!--   "however, you can remove the margin from rows and padding from columns with .no-gutters on the .row." (didn't work) -->
                        <div class="row mx-0">
                            <!-- Removed left padding on text with px-0 -->
                            <div class="col-sm-auto px-0">
                                <label for="inputPold" class="form-label" id="inputPoldLabel">POLDs</label>
                            </div>
                            <div class="col-auto">
                                <!-- Checkbox for auto-calculating POLD total -->
                                <div class="form-check startHidden divCalcPoldTotal" id="divCalcPoldTotal">
                                    <!-- Supposed to have (bootstrap)  form-check  class on parent div, but that puts checkbox on left. Remove if you want checkbox on right -->
                                    <label for="checkCalcPoldTotal" class="form-label mx-3"><i>Auto-calculate POLD
                                            total</i></label>
                                    <input type="checkbox" class="form-check-input mx-1" id="checkCalcPoldTotal">
                                </div>
                            </div>
                        </div>
                        <div class="row mb-2 mx-0">
                            <!-- POLD number input -->
                            <input type="number" class="form-control" id="inputPold" min="0" max="30"
                                aria-describedby="poldHelp">
                            <div id="poldHelp" class="form-text"><i>Maximum of 30. If requesting more than 15, email a
                                    list of zones.</i>
                            </div>
                        </div>

                        <!-- Leak Rope -->
                        <div class="row">
                            <div class="col mt-0">
                                <!-- Leak Rope checkbox -->
                                <div class="form-check">
                                    <!-- Supposed to have (bootstrap)  form-check  class on parent div, but that puts checkbox on left. Remove if you want checkbox on right -->
                                    <label for="checkLeakRope" class="form-label mx-3">Leak Rope</label>
                                    <!-- TODO:  Align checkbox right (keeping text and div section on left) -->
                                    <input type="checkbox" class="form-check-input mx-1" id="checkLeakRope">
                                </div>
                            </div>
                            <!-- Extra column for the heck of it -->
                            <div class="col">
                            </div>
                        </div>
                        <!-- Leak rope options -->
                        <div class="row mx-1 mt-2">
                            <div class="col mx-1 mb-2 startHidden expandPold" id="expandPold1">
                                <label for="inputPoldPin" class="form-label">POLDs with pins</label>
                                <input type="number" class="form-control" id="inputPoldPin" min="0" max="30">
                            </div>
                            <!-- Extra column for the heck of it -->
                            <div class="col">
                            </div>
                        </div>

                        <div class="row mb-4">
                            <!-- POLD with Leak Rope -->
                            <div class="col startHidden expandPold" id="expandPold2">
                                <div class="card m-3">
                                    <div class="m-3">
                                        <label for="inputPoldLeakRope2ft" class="form-label">POLDs with Leak Rope
                                            (2ft)</label>
                                        <input type="number" class="form-control" id="inputPoldLeakRope2ft" min="0"
                                            max="30">
                                    </div>
                                    <div class="m-3">
                                        <label for="inputPoldLeakRope5ft" class="form-label">POLDs with Leak Rope
                                            (5ft)</label>
                                        <input type="number" class="form-control" id="inputPoldLeakRope5ft" min="0"
                                            max="30">
                                    </div>
                                    <div class="m-3">
                                        <label for="inputPoldLeakRope10ft" class="form-label">POLDs with Leak Rope
                                            (10ft)</label>
                                        <input type="number" class="form-control" id="inputPoldLeakRope10ft" min="0"
                                            max="30">
                                    </div>
                                </div>
                            </div>
                            <!-- Just Leak Rope -->
                            <div class="col startHidden expandPold" id="expandPold3">
                                <div class="card m-3">
                                    <div class="m-3">
                                        <label for="inputLeakRope2ft" class="form-label">Just Leak Rope (2ft)</label>
                                        <input type="number" class="form-control" id="inputLeakRope2ft" min="0"
                                            max="30">
                                    </div>
                                    <div class="m-3">
                                        <label for="inputLeakRope5ft" class="form-label">Just Leak Rope (5ft)</label>
                                        <input type="number" class="form-control" id="inputLeakRope5ft" min="0"
                                            max="30">
                                    </div>
                                    <div class="m-3">
                                        <label for="inputLeakRope10ft" class="form-label">Just Leak Rope (10ft)</label>
                                        <input type="number" class="form-control" id="inputLeakRope10ft" min="0"
                                            max="30">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>





                    <div class="mb-3 groupWizard1 groupLds groupAccessories">
                        <label for="inputRecirc" class="form-label">Recirculation Pump Switch</label>
                        <input type="number" class="form-control" id="inputRecirc">
                    </div>
                    <div class="mb-3 groupWizard1 groupLds groupAccessories">
                        <label for="inputFourHour" class="form-label">Four Hour Timer</label>
                        <input type="number" class="form-control" id="inputFourHour">
                    </div>
                    <div class="mb-3">
                        <label for="inputPam1" class="form-label">PAM-1 Relay</label>
                        <input type="number" class="form-control" id="inputPam1">
                    </div>
                    <div class="mb-3">
                        <label for="inputSsr" class="form-label">Solid State Relay</label>
                        <!-- If you want to constrain to even numbers and fail validation if not:  step="2" -->
                        <input type="number" class="form-control" id="inputSsr" step="2">
                        <div id="ssrHelp" class="form-text"><i>Typically sent in multiples of 2.</i></div>
                    </div>

                    <div class="mt-5 mb-3 groupWizard1 groupLds groupAccessories">
                        <label for="inputJuncBox" class="form-label">Junction Box</label>
                        <input type="number" class="form-control" id="inputJuncBox">
                    </div>
                    <!-- Don't show if POLD-Only is selected (through the group classes, only for lds and accessories) -->
                    <div class="mb-3 groupWizard1 groupLds groupAccessories">
                        <label for="inputInsulPouch" class="form-label">Insulated Pouch</label>
                        <input type="number" class="form-control" id="inputInsulPouch">
                    </div>


                    <!-- Spacing -->
                    <div class="mt-4 mb-3">&nbsp;</div>
                    <!-- Horizontal line -->
                    <hr>
                    <!-- Instruction text -->
                    <div class="mt-3 mb-3"><b>Extra info:</b></div>

                    <!-- SO#  (to keep track of multiple pages together, and matching printed labels to packing lists etc) -->
                    <!-- Input not required, and won't print if value is not greater than 0/blank -->
                    <!-- I think I lost my form validation when I made form return false to prevent refreshing the page -->
                    <!-- Could add an eventlistener if I really wanna validate this form input -->
                    <!-- I set the max to 999999999999999 because after this, it truncates it weirdly -->
                    <div class="mb-4 mt-3">
                        <label for="inputSoNum" class="form-label">Sales Order Number (SO#)</label>
                        <input type="number" class="form-control" id="inputSoNum" min="0" max="999999999999999"
                            aria-describedby="soNumHelp">
                        <div id="soNumHelp" class="form-text"><i>Only required if printing labels for a multi-box
                                shipment</i></div>
                    </div>

                </div>

            </div>



            <!-- FORM FOOTER -->
            <!-- FUNCTION:  Wrap everything in a  startHidden  div to start collapsed before showing with top 3 toggles  (div 2 of 2)-->
            <div class="startHidden showOnHeaderClick">
                <div class="row collapse.show groupWizard1 formFooterBox groupLds groupPoldOnly groupAccessories"
                    id="formFooterBox">
                    <!-- font-weight-bold isn't working... -->
                    <!-- TODO: Expand to show extra input fields like zoho link, device id, details/comment box to help person preparing (and maybe auto copy to zoho and packing list/label?) -->

                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input mx-3" id="checkReplacement">
                        <label class="form-check-label" for="checkReplacement">Replacement for existing
                            system/accessory?</label>
                    </div>


                    <div class="row mt-1 mb-2">
                        <div class="col">
                            <div class="resetAndSubmitButtons" id="resetAndSubmitButtons">
                                <!-- FUNCTION:  Reset button -->
                                <!-- HISTORY:  Wasn't fully resetting the form, so I switched to just refreshing the page on click -->
                                <!-- REFERENCE:  https://stackoverflow.com/a/20740876/1263035 -->
                                <!-- Also added scrolling back to top of page -->
                                <!-- REFERENCE:  https://stackoverflow.com/a/66789888/1263035 -->
                                <button class="btn btn-danger btn-sm mx-2 " type="reset" id="mainResetButton"
                                    value="Reset">Reset</button>
                                <!-- Wasn't fully resetting the form, so I was manually hiding shown divs as well with  onclick="resetHidden()" but now just refreshing page -->
                                <!-- <button class="btn btn-danger btn-sm" type="reset" id="mainResetButton"
                                    onclick="resetHidden()" value="Reset">Reset</button> -->

                                <!-- FUNCTION:  Submit button -->
                                <!-- TIP:  Align right with float-end -->
                                <button type="submit" class="btn btn-primary submitButton"
                                    id="finalSubmitButton">Submit</button>
                            </div>
                        </div>
                        <div class="col">
                            <!-- Submit button used to be here on the right -->
                            <!-- May not actually need the rows and columns now -->
                        </div>
                    </div>

                    <div class="mt-3">
                        <div class="float-end">
                            <!-- Version number -->
                            <!-- Text is not aligning right and idk why -->
                            <div class="">
                                <p class="versionNumber text-muted text-right" id="versionNumber"><i>Version 3.1.5</i>
                                </p>
                            </div>
                            <div class="mb-3 form-check startHidden" id="debugDiv">
                                <!-- float-end  for align-right -->
                                <input type="checkbox" class="form-check-input mx-3" id="checkDebug">
                                <label class="form-check-label text-muted" for="checkDebug"><i>[Debugging
                                        mode]</i></label>
                            </div>
                            <div class="mb-3 startHidden" id="knownIssues">
                                <!-- REFERENCE: https://stackoverflow.com/a/17711167  rel="noopener noreferrer" to prevent phishing attacks -->
                                <!-- float-end  for align-right -->
                                <a href="z_todo.txt" class="mx-3" target="_blank" rel="noopener noreferrer"><i>[Known
                                        issues]</i></a>
                            </div>
                        </div>
                    </div>

                </div>

            </div>


        </form>

    </div>























    <!-- JAVASCRIPT -->



    <!-- Bootstrap 5 Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
        crossorigin="anonymous"></script>



    <!-- jsPDF library for generating pdf.  https://github.com/MrRio/
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.es.min.js"></script>



    <script type="text/javascript">
        //// jsPDF CREATE PDF ////
        import { jsPDF } from "jspdf.es.min.js";


        // Default export is a4 paper, portrait, using millimeters for units
        // 4x6 inches
        const doc = new jsPDF({
            orientation: "portrait",
            unit: "in",
            format: [4, 6],
        });

        doc.text("Hello world!", 1, 1);
        doc.save("two-by-four.pdf");
    </script> -->



    <!-- SAVE PDF. html2pdf library for generating pdf.  https://github.com/eKoopmans/html2pdf.js -->
    <script src="./js/html2pdf.bundle.min.js"></script>
    <!-- To enable png image compression, try using the canvas-png-compression shim, 
     which should be an in-place solution to enable png compression via the quality option.
     SOURCE:  https://github.com/ShyykoSerhiy/canvas-png-compression -->
    <script src="./js/canvas-png-compression_bundle.js"></script>



    <script type="text/javascript">

        // Replaces HTMLCanvasElement.toDataURL() with canvas-png-compression's implementation.
        CanvasPngCompression.replaceToDataURL();
        // If for some reason you need to revert to native implementation, use:
        // CanvasPngCompression.revertToDataURL();


        // FUNCTION: Vanilla html2pdf stuff
        // NOTE: I added a 'body' id to my html body tag to make it easy to reference
        var html2pdfElement = document.getElementById('resultsBox');
        var html2pdfOpt = {
            margin: 0.2,
            // TODO:  Add date/time and package info to filename
            filename: 'PFP3.pdf',
            image: { type: 'jpg', quality: 0.98 },
            html2canvas: { scale: 2 },
            // pagebreak: { before: '.newBox' },
            // Width in Inches
            jsPDF: { unit: 'in', format: [4, 6], orientation: 'portrait' }
            // Width in px (203 dpi/ppi ZP500 thermal printer)
            ////jsPDF: { unit: 'px', format: [812, 1218], orientation: 'portrait' }
        };

        // FUNCTION: Call the function to save as pdf, using New Promise-based usage:
        //// html2pdf().set(opt).from(element).save();
        // Changed to my variables:
        //// html2pdf().set(html2pdfOpt).from(html2pdfElement).save();

        // FUNCTION: Call the function to save as pdf, using Old monolithic-style usage:
        //// html2pdf(element, opt);
        // Changed to my variables:
        //// html2pdf(html2pdfElement, html2pdfOpt);


        // FUNCTION: Adding @media print css options to html2pdf output
        // USAGE: Call this function before running html2pdf
        function addPrintCss() {
            //// document.body.classList.add("printCss");  // Use this to directly add to body tag

            // FUNCTION:  Add/import a css stylesheet with javascript (add to end of head tag)
            // SOURCE:  https://stackoverflow.com/a/50822576
            document.getElementsByTagName("head")[0].insertAdjacentHTML(
                "beforeend",
                "<link rel=\"stylesheet\" href=\"./css/printCss.css\" />");
        };
        // USAGE: Call this function after running html2pdf (might need to use .then(function))
        function removePrintCss() {
            //// document.body.classList.remove("printCss");  // Didn't work

            // TODO:  Make it actually remove the css file 
            //  (maybe delete the text for the file import in the head tag?)
            //  (maybe add class to link tag to get the element id easier and delete that?)
            //  (maybe load a different css file with opposite values or clear/reset values?)
            // SOURCE:  https://stackoverflow.com/a/50822576
            document.getElementsByTagName("head")[0].insertAdjacentHTML(
                "beforeend",
                "<link rel=\"stylesheet\" href=\"./css/printCss.css\" />");
        };


        // FUNCTION: Calling the html2pdf function and the add/remove print css functions
        function html2pdfAndPrintCss() {
            addPrintCss();
            html2pdf().set(html2pdfOpt).from(html2pdfElement).save();
            // removePrintCss();
        };




        // FUNCTION: Adding @media print css options to html2pdf output
        // Adds the print class to the body tag before running html2pdf, then remove after
        // SOURCE: https://github.com/eKoopmans/html2pdf.js/issues/79#issuecomment-552126785
        // NOTE: I added a 'body' id to my html body tag to make it easy to reference
        // var source = document.getElementById('body');
        // document.body.classList.add("print");  // Use this to directly add to body tag
        // ////source.classList.add('print');  // Or use this to add to any referenced element
        //// html2pdf(body, {
        ////     filename: 'myfile.pdf',
        ////     image: { type: 'jpeg', quality: 0.98 },
        ////     html2canvas: { scale: 2 },
        ////     jsPDF: { unit: 'in', format: [4, 6], orientation: 'portrait' }
        //// }).then(function () {
        ////     document.body.classList.remove("print");
        //// });

    </script>







    <!-- Custom scripts -->
    <script type="text/javascript">








        // Change checkbox values from On/NaN to 1 or 0
        // SOURCE:  https://stackoverflow.com/questions/18295811/checkbox-value-0-or-1
        // SOURCE:  https://stackoverflow.com/a/63962842
        document.addEventListener('DOMContentLoaded', e => {
            for (let checkbox of document.querySelectorAll('input[type=checkbox]')) {
                checkbox.value = checkbox.checked ? 1 : 0;
                checkbox.addEventListener('change', e => {
                    e.target.value = e.target.checked ? 1 : 0;
                });
            }
        });




        // FUNCTION:  Hide and show the correct sections from the top buttons (LDS, POLD-Only, Accessories)
        // HISTORY:  Had to abandon bootstrap .collapse method and just hide all then show what i want (so it wouldn't toggle things incorrectly)
        // TIP: Can replace  (document.querySelectorAll('.groupLds'))  with  (document.querySelectorAll(`.${groupClass}`))  
        //      '.groupLds'  to  `.${groupClass}`  (a literal) to insert variable groupClass with string . (period) in front of it (or any other string)
        // Everything with class  groupWizard1  gets hidden first, upon header click  (like it's the 1st wizard step)
        function collapseGroup(groupClass) {
            // Show the 2 main startHidden divs with class  showOnHeaderClick  first
            elements = document.getElementsByClassName("showOnHeaderClick");
            for (var i = 0; i < elements.length; i++) {
                elements[i].style.display = elements[i].style.display = 'block';
            }
            // Hide everything first
            elements = document.getElementsByClassName("groupWizard1");
            for (var i = 0; i < elements.length; i++) {
                elements[i].style.display = elements[i].style.display = 'none';
            }
            // Show what you want
            elements = document.getElementsByClassName(`${groupClass}`);
            for (var i = 0; i < elements.length; i++) {
                elements[i].style.display = elements[i].style.display = '';
            }
        }




        // FUNCTION:  Hide the  startHidden  divs when pressing the Reset button
        // TODO: Maybe remove this function since it's not called anymore (may need it for something else in the future though)
        function resetHidden(groupClass) {
            // Hide everything first
            // elements = document.getElementsByClassName(`${groupClass}`);
            elements = document.getElementsByClassName("startHidden");
            for (var i = 0; i < elements.length; i++) {
                elements[i].style.display = elements[i].style.display = 'none';
            }
            // Show default LDS group  (lds top button defaults to active anyway, so it fits)
            // TODO:  Maybe change this to just clicking the button (so it's active as well)
            elements = document.getElementsByClassName("groupLds");
            for (var i = 0; i < elements.length; i++) {
                elements[i].style.display = elements[i].style.display = '';
            }
        }



        // FUNCTION:  Show warning that B3 isn't done
        // REFERENCE:  https://www.w3schools.com/howto/howto_js_toggle_hide_show.asp
        // SAMPLE:  https://www.w3schools.com/jsref/event_onchange.asp
        document.getElementById("selectSplitSystem").addEventListener("change", alertUnfinishedFeature1);
        function alertUnfinishedFeature1() {
            var elementSelectSplitSystem = document.getElementById("selectSplitSystem");
            if (selectSplitSystem.value == 3) {
                window.alert("Rules for B3 systems are not complete. Ask the warehouse for the proper packaging configuration");
            }
        }



        // FUNCTION:  Show extra Hidden Wire section if present
        // HISTORY:  I'm not sure why it's reversed. Maybe it's checking the value on click, instead of seeing what it changes to
        // REFERENCE:  https://www.w3schools.com/howto/howto_js_toggle_hide_show.asp
        // SAMPLE:  https://www.w3schools.com/jsref/event_onchange.asp
        document.getElementById("checkHiddenWire").addEventListener("change", setHiddenWire);
        function setHiddenWire() {
            var idHiddenWire = document.getElementById("checkHiddenWire");
            var elementHiddenWire;
            if (idHiddenWire.value == 0) {
                elementHiddenWire = document.getElementById("inputHiddenWireLength");
                elementHiddenWire.style.display = "block";
                elementHiddenWire = document.getElementById("hiddenWireHelp");
                elementHiddenWire.style.display = "block";
                // window.alert("idHiddenWire.value == 0  " + idHiddenWire.value);
            }
            else if (idHiddenWire.value > 0) {
                elementHiddenWire = document.getElementById("inputHiddenWireLength");
                elementHiddenWire.style.display = "none";
                elementHiddenWire = document.getElementById("hiddenWireHelp");
                elementHiddenWire.style.display = "none";
                // window.alert("idHiddenWire.value > 0  " + idHiddenWire.value);
            }
        }



        // Show POLD leak rope section if leak rope checkbox is selected
        // HISTORY:  Changed from checkbox value to .checked because value was reversed.
        //  Maybe it was checking the value on click, instead of seeing what it changes to.
        //  Or it had to wait for the function to convert checkbox values to 1 / 0.
        // SAMPLE:  https://www.w3schools.com/jsref/event_onchange.asp
        // REFERENCE:  (for checkboxes) https://stackoverflow.com/questions/14544104/checkbox-check-event-listener
        document.getElementById("checkLeakRope").addEventListener("change", setLeakRope);
        function setLeakRope() {
            var elementLeakRope = document.getElementById("checkLeakRope");
            var elementPrefix;
            if (elementLeakRope.checked == true) {
                // Show all extra POLD/Rope sections
                elementPrefix = document.getElementById("expandPold1");
                elementPrefix.style.display = "block";
                elementPrefix = document.getElementById("expandPold2");
                elementPrefix.style.display = "block";
                elementPrefix = document.getElementById("expandPold3");
                elementPrefix.style.display = "block";
                elementPrefix = document.getElementById("divCalcPoldTotal");
                elementPrefix.style.display = "block";
                // Check the "auto-calc" checkbox by default
                elementPrefix = document.getElementById("checkCalcPoldTotal");
                elementPrefix.checked = true;
                // Make the POLD form input readonly/disabled
                // REFERENCE:  https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute
                // REFERENCE:  (bootstrap) https://stackoverflow.com/questions/34539657/how-do-you-disabled-a-bootstrap-form-field
                // REFERENCE:  (boolean attributes) https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#boolean-attributes
                elementPrefix = document.getElementById("inputPold");
                elementPrefix.setAttribute("readonly", "readonly");
                // Change POLD input title
                document.getElementById("inputPoldLabel").innerHTML = "POLDs (total)";
            }
            else if (elementLeakRope.checked == false) {
                // Hide all extra POLD/Rope sections
                elementPrefix = document.getElementById("expandPold1");
                elementPrefix.style.display = "none";
                elementPrefix = document.getElementById("expandPold2");
                elementPrefix.style.display = "none";
                elementPrefix = document.getElementById("expandPold3");
                elementPrefix.style.display = "none";
                elementPrefix = document.getElementById("divCalcPoldTotal");
                elementPrefix.style.display = "none";
                // Uncheck the "auto-calc" checkbox when hidden
                elementPrefix = document.getElementById("checkCalcPoldTotal");
                elementPrefix.checked = false;
                // Make the POLD form input not readonly
                // REFERENCE:  https://developer.mozilla.org/en-US/docs/Web/API/Element/removeAttribute
                elementPrefix = document.getElementById("inputPold");
                elementPrefix.removeAttribute("readonly");
                // Change POLD input title
                document.getElementById("inputPoldLabel").innerHTML = "POLDs";

                // Reset form input values when section is hidden
                // TODO:  Maybe save the values first to restore if section is shown again
                document.getElementById("inputPoldPin").value = "";
                document.getElementById("inputPoldLeakRope2ft").value = "";
                document.getElementById("inputPoldLeakRope5ft").value = "";
                document.getElementById("inputPoldLeakRope10ft").value = "";
                document.getElementById("inputLeakRope2ft").value = "";
                document.getElementById("inputLeakRope5ft").value = "";
                document.getElementById("inputLeakRope10ft").value = "";
            }
        }

        // Disable/enable readonly state on POLD Total input box, from checkbox
        // SAMPLE:  https://www.w3schools.com/jsref/event_onchange.asp
        document.getElementById("checkCalcPoldTotal").addEventListener("change", setPoldTotalReadOnly);
        function setPoldTotalReadOnly() {
            var elementCheckCalcPoldTotal = document.getElementById("checkCalcPoldTotal");
            var elementPrefix;
            if (elementCheckCalcPoldTotal.checked == true) {
                elementPrefix = document.getElementById("inputPold");
                elementPrefix.setAttribute("readonly", "readonly");
                // Immediately calculate the total if the checkbox is checked again
                calcPoldTotal();
            }
            else if (elementCheckCalcPoldTotal.checked == false) {
                elementPrefix = document.getElementById("inputPold");
                elementPrefix.removeAttribute("readonly");
            }
        }

        // Auto-Calculate total POLDs (when a related input is changed)
        // ALso disables input and show a checkbox (default checked) to auto-calc total
        // SAMPLE:  https://www.w3schools.com/jsref/event_onchange.asp
        document.getElementById("inputPoldPin").addEventListener("change", calcPoldTotal);
        document.getElementById("inputPoldLeakRope2ft").addEventListener("change", calcPoldTotal);
        document.getElementById("inputPoldLeakRope5ft").addEventListener("change", calcPoldTotal);
        document.getElementById("inputPoldLeakRope10ft").addEventListener("change", calcPoldTotal);
        function calcPoldTotal() {
            var idInputPold = document.getElementById("inputPold");
            if (checkCalcPoldTotal.checked == true) {
                // Add together the values of all the pold input boxes (POLDs with pins, POLDs with leak rope 2ft, 5ft, 10ft)
                // They were showing/adding as strings so I had to wrap them in Number()
                idInputPold.value = Number(document.getElementById("inputPoldPin").value) + Number(document.getElementById("inputPoldLeakRope2ft").value) + Number(document.getElementById("inputPoldLeakRope5ft").value) + Number(document.getElementById("inputPoldLeakRope10ft").value);
            }
            else if (checkCalcPoldTotal.checked == false) {
                // idk. do nothing i guess
            }
        }

        // // Show extra POLD section if POLDs are present (replaced with code above)
        // // TODO:  Hide section if POLDs goes back to 0
        // // SAMPLE:  https://www.w3schools.com/jsref/event_oninput.asp
        // // SAMPLE:  https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_oninput_dom
        // document.getElementById("inputPold").oninput = function () { showPoldExtra() };
        // function showPoldExtra() {
        //     var elementPold = document.getElementById("expandPold");
        //     elementPold.style.display = "block";
        // }




        // FUNCTION:  Show Split System dropdown selector if checked
        // HISTORY:  I'm not sure why it's reversed. Maybe it's checking the value on click, instead of seeing what it changes to
        // SAMPLE:  https://www.w3schools.com/jsref/event_onchange.asp
        document.getElementById("checkSplitSystem").addEventListener("change", setSplitSystem);
        function setSplitSystem() {
            var idSplitSystem = document.getElementById("checkSplitSystem");
            if (idSplitSystem.value == 0) {
                var elementSplitSystem = document.getElementById("selectSplitSystem");
                elementSplitSystem.style.display = "block";
                // window.alert("idSplitSystem.value == 0  " + idSplitSystem.value);
            }
            else if (idSplitSystem.value > 0) {
                var elementSplitSystem = document.getElementById("selectSplitSystem");
                elementSplitSystem.style.display = "none";
                // window.alert("idSplitSystem.value > 0  " + idSplitSystem.value);
            }
        }



        // Set SCV = 1 if an LDS is selected
        // TODO:  Maybe change  var elementId  to a unique var
        // HISTORY:  Changed to  addEventListener  so it could run two functions from one  onchange
        // SAMPLE:  https://www.w3schools.com/jsref/event_onchange.asp
        document.getElementById("selectLds").addEventListener("change", setScv);
        //document.getElementById("selectLds").onchange = function () { setScv() };
        function setScv() {
            var valueLds = document.getElementById("selectLds");
            if (valueLds.value > 0) {
                var elementId = document.getElementById("inputScv");
                elementId.value = "1";
            }
            else if (valueLds.value == 0) {
                var elementId = document.getElementById("inputScv");
                elementId.value = "";
            }
        }

        // Set CP = 1 if an LDS is selected
        // TODO:  Maybe change  var elementId  to a unique var
        // HISTORY:  Changed to  addEventListener  so it could run two functions from one  onchange
        // SAMPLE:  https://www.w3schools.com/jsref/event_onchange.asp
        document.getElementById("selectLds").addEventListener("change", setCp);
        //document.getElementById("selectLds").onchange = function () { setCp() };
        function setCp() {
            var valueLds = document.getElementById("selectLds");
            if (valueLds.value > 0) {
                var elementId = document.getElementById("inputCp");
                elementId.value = "1";
            }
            else if (valueLds.value == 0) {
                var elementId = document.getElementById("inputCp");
                elementId.value = "";
            }
        }


        // Set LDS = 0 if POLD-Only is selected
        // TODO:  Maybe change  var elementId  to a unique var
        // SAMPLE:  https://www.w3schools.com/jsref/event_onchange.asp
        function setLds(ldsValueToSet) {
            var elementId = document.getElementById("selectLds");
            elementId.value = ldsValueToSet;
            // Set SCV value to 0 as well (the function will choose 0 when it evaluates that LDS is zero)
            setScv();
            setCp();
        }


        // FUNCTION:  Show debugging checkbox if version number is clicked
        // HISTORY:  I'm not sure why it's reversed. Maybe it's checking the value on click, instead of seeing what it changes to
        // SAMPLE:  https://www.w3schools.com/jsref/event_onchange.asp
        document.getElementById("versionNumber").addEventListener("click", showDebugCheck);
        function showDebugCheck() {
            var elementDebugDiv = document.getElementById("debugDiv");
            var elementCheckDebug = document.getElementById("checkDebug");
            var elementKnownIssues = document.getElementById("knownIssues");
            // If debug checkbox is shown when version number is clicked, hide it
            if (elementDebugDiv.style.display == "block") {
                // Uncheck debugging
                elementCheckDebug.checked = false;
                // Had to add this to auto-update the valueDebug value on submit
                elementCheckDebug.value = 0;

                // Hide debugging checkbox
                elementDebugDiv.style.display = "none";
                // Also hide known issues link
                elementKnownIssues.style.display = "none";
            }
            // Otherwise show it
            else {
                elementDebugDiv.style.display = "block";
            }
        }



        // FUNCTION:  Show known issues link if debugging checkbox is checked
        // HISTORY:  I'm not sure why it's reversed. Maybe it's checking the value on click, instead of seeing what it changes to
        // SAMPLE:  https://www.w3schools.com/jsref/event_onchange.asp
        document.getElementById("checkDebug").addEventListener("change", setKnownIssues);
        function setKnownIssues() {
            var idCheckDebug = document.getElementById("checkDebug");
            if (idCheckDebug.value == 0) {
                var elementKnownIssues = document.getElementById("knownIssues");
                elementKnownIssues.style.display = "block";
                // window.alert("idCheckDebug.value == 0  " + idCheckDebug.value);
            }
            else if (idCheckDebug.value > 0) {
                var elementKnownIssues = document.getElementById("knownIssues");
                elementKnownIssues.style.display = "none";
                // window.alert("idCheckDebug.value > 0  " + idCheckDebug.value);
            }
        }







        //  START BOX CALCULATIONS (FROM FORMS)

        // FUNCTION:  Define Object list + size/space values  (for determining what boxes they fit in)
        // EXAMPLE:  https://mdbootstrap.com/education/javascript/chapter-2-lesson-6/
        var packingItem = {
            lds: 0,
            lds075: 0,
            lds100: 0,
            lds125: 0,
            lds150: 0,
            lds200: 0,
            lds250: 0,
            lds300: 0,

            splitSystem: 0,
            splitSystemB1: 0,
            splitSystemB2: 0,
            splitSystemB3: 0,

            scv: 0,
            cp: 0,
            api: 3,
            pold: 1,

            poldPin: 1,
            poldLeakRope2ft: 1.5,
            poldLeakRope5ft: 2,
            poldLeakRope10ft: 2,
            leakRope2ft: 0.5,
            leakRope5ft: 1,
            leakRope10ft: 1,

            recirc: 6,
            fourHour: 6,
            ssr: 0,
            pam1: 0,

            juncBox: 36,
            insulPouch: 6,  // Defaults to an additional Medium Shipper
            hiddenWire: 3,


            //BOXES
            // Standard Shipper (19x12x7) = 12 (For .75-1.5" systems only)
            boxLds: 12,
            // Medium Shipper (20x12x8) = 6 (Used for 2" systems or Insulated Pouch only)
            boxLdsMedium: 6,
            // Large Shipper (18x18x14) = 18 (Used only for 2.5" and 3" systems)
            boxLdsLarge: 18,

            // Panel Box (10x7x3) = 6
            boxCp: 6,
            // Large Accessory Box (14x14x14) = 48 (Use only if EJB is included or if Point total is greater than or equal to 49)
            box14x14: 48,
            // Recirc/4 hr Box (9x4x3) = 6 (Only to be used for single Recirc Pump Switch or 4hr Timer)
            boxRecirc: 6,
            // Accessory Box (13x10x5) = 12
            boxAccessories: 12,
            // Bubble Mailer (11x9x1) = 2.5 (Use for shippments of accesory only)
            bubbleMailer: 2.5,
        };

        // Order of Priority:
        // Panel, SCV, Hidden Wire and Pam1 always in Box 1
        // 1. API
        // 2. POLD
        // 3. Recirc Pump Switch
        // 4. 4hr Time
        // 5. Enclosures (Pouch + EJB)
        // Solid State Relays included with box carrying most POLDs




        // FUNCTION:  Define Object list of weights (pounds/lbs)
        // Initial weight list copied from jesse's pfp2 app
        var packingItemWeight = {
            lds: 0,
            lds075: 4.55 + 1.75 + 0.5,    // me + 24V PSU 1.75 + scv  // jesse 9.05 + 0.5 (scv)
            lds100: 5.35 + 1.75 + 0.75,   // me + 24V PSU 1.75 + scv  // jesse 9.95 + 0.75 (scv)
            lds125: 6.10 + 1.75 + 1.2,    // me + 24V PSU 1.75 + scv  // jesse 10.6 + 1.2 (scv)
            lds150: 7.60 + 1.75 + 1.6,    // me + 24V PSU 1.75 + scv  // jesse 12.2 + 1.6 (scv)
            lds200: 12.05 + 1.75 + 2.35,  // me + 24V PSU 1.75  (12.05 weighed vs 11.75 guess [VB030 4.65 + Pipe/Valve 2.00 7.10]) // jesse 17.4 + 2.35 (scv)
            lds250: 7.15 + 1.75 + 11 + 3, // VB060 7.15 + 24V PSU 1.75 +  Pipe/Valve ? +  scv ?  // guess
            lds300: 7.15 + 1.75 + 18 + 4, // VB060 7.15 + 24V PSU 1.75 +  Pipe/Valve ? +  scv ?  // guess
            lds400: 35.7 + 1.75 + 5,      // me + 24V PSU 1.75 + scv ?

            splitSystem: 0,
            splitSystemB0: 0, // fallback in case you check split-system but don't select one
            splitSystemB1: 0.2, // 7.8 is 0.2 more than standard 1.50" (really just 5ft extra wire)
            splitSystemB2: 0.4, // 4.95 is o.4 more than standard 0.75" (really just 10ft extra wire)
            splitSystemB3: 15, // ~1.35 from weighing just a grey box from dual valve (add wires and extra long pipe etc to this weight)

            dualValve075: 9, // me. (not using yet). weighed one with two 0.75" pipe/valves and small orange actuators, and grey box, with a decent length of wire

            scv: 0.5, // depends on size. 0.5-2.35lb for 0.75"-2.00" // currently including proper scv weight with lds weight as well
            cp: 0.5, // CP 0.3  +  12V PSU 0.2  +  CP+PSU 0.5
            api: 0.6, // API 0.4  +  12V PSU 0.2  +  API+PSU 0.6
            pold: 0.215, // With 2 AA and pins

            poldPin: 0.215, // With 2 AA and pins
            poldLeakRope2ft: 0.215 + 0.03,
            poldLeakRope5ft: 0.215 + 0.06,
            poldLeakRope10ft: 0.215 + 0.11,
            leakRope2ft: 0.03,
            leakRope5ft: 0.06,
            leakRope10ft: 0.11,

            recirc: 1.238, // me (in recirc pump box)  // 0.8 jesse
            fourHour: 0.95, // me (in recirc pump box. only weighed one)
            ssr: 0.17, // me 0.1625
            pam1: 0.16, // me

            juncBox: 5.45, // jesse // We have a temporary alternative junction box so i'm waiting for real weight. we install LDS <= 1.5" in them
            insulPouch: 1.92, // me
            hiddenWire: 0.18, // averaged the weights to the formula:  0.18 * length ft (valueHiddenWireLength)
            // 20ft  0.35  // me
            // 25ft  0.4   // me
            // 70ft  1.2   // me



            //BOXES
            // Standard Shipper (19x12x7) = (For .75-1.5" systems only)
            boxLds: 2, // 1.5 without 24v psu or scv (or extra padding + documents)
            // Medium Shipper (20x12x8) = (Used for 2" systems or Insulated Pouch only)
            boxLdsMedium: 3, // guess
            // Large Shipper (18x18x14) = (Used only for 2.5" and 3" systems)
            boxLdsLarge: 4, // guess

            // Panel Box (10x7x3) = 
            boxCp: 1, // guess
            // Large Accessory Box (14x14x14) = (Use only if EJB is included or if Point total is greater than or equal to 49)
            box14x14: 2, // guess
            // Recirc/4 hr Box (9x4x3) = (Only to be used for single Recirc Pump Switch or 4hr Timer)
            boxRecirc: 0.5, // guess
            // Accessory Box (13x10x5) = 
            boxAccessories: 2, // guess
            // Bubble Mailer (11x9x1) = (Use for shippments of accesory only)
            bubbleMailer: 0.2, // guess
        };








        // FUNCTION:  Go back to form input from results page, if you want to modify more
        document.getElementById("backButton").addEventListener("click", showMainPage);
        function showMainPage() {

            // FUNCTION:  Show form
            var elementToToggle = document.getElementById("mainForm");
            elementToToggle.style.display = "block";

            // FUNCTION:  Show pageTitle
            var elementToToggle = document.getElementById("pageTitle");
            elementToToggle.style.display = "block";

            // FUNCTION:  Hide results div
            var elementToToggle = document.getElementById("resultsBoxContainer");
            elementToToggle.style.display = "none";

        }







        document.getElementById("mainResetButton").addEventListener("click", resetPage1);

        // FUNCTION:  Scroll to top and refresh the page (to reset all form elements and checkboxes)
        // TODO: Figure out why scrolling to top isn't working in chrome on my work computer (debug view). (Working in firefox and on chrome at home)
        function resetPage1() {
            window.scrollTo(0, 0);
            window.location.reload();
        }

        // Alternate attepts to get a refresh working, by sleeping the code for a few seconds to wait for it to finish. Not working

        // document.addEventListener('DOMContentLoaded', resetPage0);
        // function resetPage0() {
        //     window.scrollTo(0, 0);
        // }
        // document.getElementById("mainResetButton").addEventListener("click", resetPage1);
        // function resetPage1() {
        //     window.scrollTo(0, 0);
        // }
        // document.getElementById("mainResetButton").addEventListener("click", resetPage2);
        // function resetPage2() {
        //     window.location.reload();
        // }

        // document.getElementById("mainResetButton").addEventListener("click", resetPage1);
        // function resetPage1() {
        //     setTimeout(resetPage3, 5000);
        //     function resetPage3 {
        //         window.scrollTo(0, 0);
        //     }
        //     setTimeout(resetPage2, 5000);
        //     function resetPage2() {
        //         window.location.reload();
        //     }
        // }






        // VARIABLES:  Current box number and total number of boxes (used in the functionOnSubmit function below, but variables also referenced in the functionOnPrint function below)
        var boxNumber;
        var boxTotal;

        var weightCurrentBox = 0;
        var weightTotal = 0;

        var weightSingleCurrentItem;










        /// GET FORM VALUES
        /// FUNCTION:  Store form values in variables (to use for calculations)
        /// TODO:  Convert to array or object, to sum total easier

        /// SUBMIT BUTTON (using addEventListener instead of onclick)
        document.getElementById("finalSubmitButton").addEventListener("click", functionOnSubmit);
        function functionOnSubmit() {
            // document.getElementById("demo").innerHTML = "Hello World";
            // window.alert("finalSubmitButton was pressed");


            // // Detect if browser is firefox (or related)
            // // SOURCE:  https://stackoverflow.com/a/36322090/1263035
            // if (('netscape' in window) && / rv:/.test(navigator.userAgent)) {
            //     window.alert("firefox i guess")
            // }
            // else {
            //     window.alert("not firefox i guess")
            // }


            // Moved to outside of this function so I can access when clicking Print, to validate if SO# is entered if printing more than one total box
            // var boxNumber = 1;
            // var boxTotal = 1;

            // Brought them back into this function since the initial box number kept increasing every time you went back and modified and submitted again
            boxNumber = 1;
            boxTotal = 1;

            weightCurrentBox = 0;
            weightTotal = 0;


            /// Top 3 button system type selector value check
            // Not working
            // Working reference, used later:  https://stackoverflow.com/a/1423783
            // var valueSystemLds = document.getElementById("btnradio1").value;
            // window.alert("btnradio1 " + valueSystemLds);
            // var valueSystemPold = document.getElementById("btnradio2").value;
            // window.alert("btnradio2 " + valueSystemPold);
            // var valueSystemAccessory = document.getElementById("btnradio3").value;
            // window.alert("btnradio3 " + valueSystemAccessory);


            /// ITEMS  (values entered by user)
            /// Don't add lds to value total (it's not a space value, it's a type)
            /// TIP:  To always show 2 decimel places:  Number(x).toFixed(2);
            /// REFERENCE:  https://stackoverflow.com/a/13292833
            var valueLds = Number(document.getElementById("selectLds").value).toFixed(2);

            // Split System stuff (that we're not really considering when calculating space values)
            var valueSplitSystemCheck = Number(document.getElementById("checkSplitSystem").value);
            var valueSplitSystemSelect = Number(document.getElementById("selectSplitSystem").value);

            // SO#
            var valueSoNum = Number(document.getElementById("inputSoNum").value);

            // Add this group to value total
            // TIP:  Use parseInt() or parseFloat() or Number() since it thinks these are strings and not adding properly (Number() does floats too [numbers with decimels])
            // REFERENCE:  https://stackoverflow.com/q/4564158
            var valueScv = Number(document.getElementById("inputScv").value);
            // window.alert("yo valueScv = " + valueScv);
            var valueCp = Number(document.getElementById("inputCp").value);
            // Changed inputHiddenWire to checkHiddenWire and added a new input inputHiddenWireLength, and a new variable valueHiddenWireLength
            var valueHiddenWire = Number(document.getElementById("checkHiddenWire").value);
            var valueHiddenWireLength = Number(document.getElementById("inputHiddenWireLength").value);
            var valueApi = Number(document.getElementById("inputApi").value);
            var valuePold = Number(document.getElementById("inputPold").value);
            var valuePoldPin = Number(document.getElementById("inputPoldPin").value);
            // Not an item to be added to total, just a checkmark indicator
            var valueLeakRopeCheck = Number(document.getElementById("checkLeakRope").value);
            var valuePoldLeakRope2ft = Number(document.getElementById("inputPoldLeakRope2ft").value);
            var valuePoldLeakRope5ft = Number(document.getElementById("inputPoldLeakRope5ft").value);
            var valuePoldLeakRope10ft = Number(document.getElementById("inputPoldLeakRope10ft").value);
            var valueLeakRope2ft = Number(document.getElementById("inputLeakRope2ft").value);
            var valueLeakRope5ft = Number(document.getElementById("inputLeakRope5ft").value);
            var valueLeakRope10ft = Number(document.getElementById("inputLeakRope10ft").value);
            var valueRecirc = Number(document.getElementById("inputRecirc").value);
            var valueFourHour = Number(document.getElementById("inputFourHour").value);
            var valueSsr = Number(document.getElementById("inputSsr").value);
            var valuePam1 = Number(document.getElementById("inputPam1").value);
            var valueJuncBox = Number(document.getElementById("inputJuncBox").value);
            var valueInsulPouch = Number(document.getElementById("inputInsulPouch").value);

            // Don't add on/off to value total. Use this to trigger something else (undecided what)
            // Convert  On / Undefined  to  1 / 0  by wrapping in Number();  (not sure if that worked, cuz i used javascript above to convert checkbox values to 1/0)
            var valueReplacement = Number(document.getElementById("checkReplacement").value);
            // Debug: Test the checkbox values
            // window.alert("valueReplacement = " + valueReplacement);
            // Determine if the checkbox for debugging is enabled
            var valueDebug = Number(document.getElementById("checkDebug").value);
            // Not using right now. I want debug to be values 0-3 instead of check/uncheck
            var valueDebugChecked = Number(document.getElementById("checkDebug").value);


            // TIP:  If nothing beyond here works, you have a typo or referenced the wrong ID above somewhere (idk why it doesn't error)


            // FUNCTION:  Find the total items added into the form
            // Didn't include LDS because it's not a frequency but a size.
            // valuePold not included. Just copying value over to valuePoldPin if no leak rope
            if (valueLeakRopeCheck == 0) {
                valuePoldPin = valuePold;
            }
            var valueTotal = valueSplitSystemCheck + valueScv + valueCp + valuePoldPin + valuePoldLeakRope2ft + valuePoldLeakRope5ft + valuePoldLeakRope10ft + valueLeakRope2ft + valueLeakRope5ft + valueLeakRope10ft + valueApi + valueRecirc + valueFourHour + valueSsr + valuePam1 + valueJuncBox + valueInsulPouch + valueHiddenWire;
            // Debugging
            //window.alert("yo valueTotal (form input)= " + valueTotal);


            // FUNCTION:  Multiply the number of each item in the form with the value of the item, to find packing size value. (values for size/space)
            // Can break this out by lds size later if we want
            var totalValueLds = valueLds * packingItem.lds;
            var totalValueSplitSystemCheck = valueSplitSystemCheck * packingItem.splitSystem;
            // Can break split system out by type later if we want
            // var totalValueSplitSystemSelect = valueSplitSystemSelect * packingItem.splitSystemB1;
            var totalValueScv = valueScv * packingItem.scv;
            // window.alert("yo totalValueScv = " + totalValueScv);
            var totalValueCp = valueCp * packingItem.cp;
            var totalValuePold = valuePold * packingItem.pold;
            var totalValuePoldPin = valuePoldPin * packingItem.poldPin;
            // Not a real thing (not an item, so no space value to multiply with)
            // var totalValueLeakRopeCheck ;
            var totalValuePoldLeakRope2ft = valuePoldLeakRope2ft * packingItem.poldLeakRope2ft;
            var totalValuePoldLeakRope5ft = valuePoldLeakRope5ft * packingItem.poldLeakRope5ft;
            var totalValuePoldLeakRope10ft = valuePoldLeakRope10ft * packingItem.poldLeakRope10ft;
            var totalValueLeakRope2ft = valueLeakRope2ft * packingItem.leakRope2ft;
            var totalValueLeakRope5ft = valueLeakRope5ft * packingItem.leakRope5ft;
            var totalValueLeakRope10ft = valueLeakRope10ft * packingItem.leakRope10ft;
            var totalValueApi = valueApi * packingItem.api;
            var totalValueRecirc = valueRecirc * packingItem.recirc;
            var totalValueFourHour = valueFourHour * packingItem.fourHour;
            var totalValueSsr = valueSsr * packingItem.ssr;
            var totalValuePam1 = valuePam1 * packingItem.pam1;
            var totalValueJuncBox = valueJuncBox * packingItem.juncBox;
            var totalValueInsulPouch = valueInsulPouch * packingItem.insulPouch;
            var totalValueHiddenWire = valueHiddenWire * packingItem.hiddenWire;


            // FUNCTION:  Find the total packing space required by adding all values of number of items multiplied by their space taken
            // totalValuePold not included. Just copying value over to totalValuePoldPin if no leak rope
            if (valueLeakRopeCheck == 0) {
                totalValuePoldPin = totalValuePold
            }
            var totalValueTotal = totalValueSplitSystemCheck + totalValueLds + totalValueScv + totalValueCp + totalValuePoldPin + totalValuePoldLeakRope2ft + totalValuePoldLeakRope5ft + totalValuePoldLeakRope10ft + totalValueLeakRope2ft + totalValueLeakRope5ft + totalValueLeakRope10ft + totalValueApi + totalValueRecirc + totalValueFourHour + totalValueSsr + totalValuePam1 + totalValueJuncBox + totalValueInsulPouch + totalValueHiddenWire;


            // HISTORY:  Changed from using this variable to calculate how much total space value was left to pack, to how many total items are left to pack (since some items have 0 space value)
            // I still need this variable though because I'm doing other calculations like seeing if I can fit leftovers in 14x14  if ((totalValueCurrent - totalValueJuncBox - totalValueInsulPouch) <= (packingItem.box14x14 - packingItem.juncBox)) 
            // I pulled this up higher to access it for choosing the first box, but left it in its original spot as well
            var totalValueCurrent = totalValueTotal;

            //window.alert("yo totalValueTotal () = " + totalValueTotal);

            /*                Order of Priority:
            Panel, SCV, Hidden Wire and Pam1 always in Box 1
            1. API
            2. POLD
            3. Recirc Pump Switch
            4. 4hr Time
            5. Enclosures (Pouch + EJB)
            Solid State Relays included with box carrying most POLDs
            */






            // Variable for text being output to the results box
            var outputString;
            var outputStringFunc;


            // FUNCTION:  Start with LDS size to determine which primary box to start with
            // Standard Shipper (19x12x7)  (For .75-1.5" systems only) -Bryce
            // TODO:  Maybe shorthand the code like this, if it works:  if valueLds <= 1.5 && > 0
            // TODO:  Export text file (node.js?) (do browsers even allow it?) then display that text in browser or print file
            if (valueLds > 0 && valueLds <= 1.5) {

                // FUNCTION:  Call function to build list of all items and what boxes they go in (displayed later through hidden div)
                // Pass the box name as a function argument (list of items is returned, and stored as the variable)
                outputStringFunc = buildOutputString("Standard Shipper (19x12x7)", packingItem.boxLds, packingItemWeight.boxLds);

            }
            // Large Shipper (18x18x14) = 18 (Used only for 2.5" and 3" systems) -Bryce
            // HISTORY:  Put this above the 2" condition, so if there's a 3 inch system with insulated pouch, it doesn't put the 3" into a medium shipper
            // (may not apply anymore since insulated pouch gets additional medium shipper instead of changing primary box)
            else if (valueLds == 2.5 || valueLds == 3) {
                // FUNCTION:  Call function to build list of all items and what boxes they go in (displayed later through hidden div)
                outputStringFunc = buildOutputString("Large Shipper (18x18x14)", packingItem.boxLdsLarge, packingItemWeight.boxLdsLarge);
            }
            // Medium Shipper (20x12x8)  (Used for 2" systems or Insulated Pouch only) -Bryce
            // HISTORY:  Changed this to only apply to 2" system as primary box. If insulated pouch, medium shipper should be an additional box
            // else if (valueLds == 2 || valueInsulPouch > 0) {
            else if (valueLds == 2) {
                // FUNCTION:  Call function to build list of all items and what boxes they go in (displayed later through hidden div)
                outputStringFunc = buildOutputString("Medium Shipper (20x12x8)", packingItem.boxLdsMedium, packingItemWeight.boxLdsMedium);
            }

            // FUNCTION:  If LDS is 0 (POLD-Only).
            // NOTE: Accessory box is the default primary box for POLD-Only -Bryce
            // TODO:  Don't show the accessory box on results if it's empty and your first box is medium shipper for 1 Insulated Pouch or something
            // TODO:  Maybe add:  || valueLds == '' || valueLds == 'undefined'
            else if (valueLds == 0) {

                // If there's no LDS, determine the first box here
                // See if we have 1 or more juncBox present first:
                if (valueJuncBox >= 1) {
                    // then subtracTing the value of the juncBoxes and insulPouches from the totalValueCurrent (since we're only worried about the other accessories that will be packed in this box), 
                    // and see if it's less than the space remaining in a 14x14 after packing a juncBox:
                    // TODO:  Make sure the subtraction on the left is working as expected
                    // This should allow packing up to 12pt of accessories in a 14x14 plus a juncBox
                    if ((totalValueCurrent - totalValueJuncBox - totalValueInsulPouch) <= (packingItem.box14x14 - packingItem.juncBox)) {
                        nextBox = "Large Accessory Box (14x14x14)";
                        nextBoxValue = packingItem.box14x14;
                        nextBoxWeightSingle = packingItemWeight.box14x14;
                        // DEBUGGING level 3
                        // if (valueDebug >= 1) {
                        //     window.alert("3 INSIDE IF1:\n (totalValueCurrent - totalValueJuncBox - totalValueInsulPouch) == " + tempWindowalertVariable98sfhn + "\n currentItemName == " + currentItemName);
                        // }
                    }
                    // or if the total accessories (minus juncBox and insulPouch) are greater than or equal to 3 accessory boxes, then pack in a 14x14 instead
                    // TODO:  Make sure the subtraction on the left is working as expected
                    else if ((totalValueCurrent - totalValueJuncBox - totalValueInsulPouch) >= (packingItem.boxAccessories * 3)) {
                        nextBox = "Large Accessory Box (14x14x14)";
                        nextBoxValue = packingItem.box14x14;
                        nextBoxWeightSingle = packingItemWeight.box14x14;
                        // DEBUGGING level 3
                        // if (valueDebug >= 1) {
                        //     window.alert("4 INSIDE IF2:\n (totalValueCurrent - totalValueJuncBox - totalValueInsulPouch) == " + tempWindowalertVariable98sfhn + "\n currentItemName == " + currentItemName);
                        // }
                    }
                    else {
                        // Default back to an accessory box
                        // TODO:  Check to make sure this isn't overriding other special circumstances like recirc pump box (it probably is. may need to move those if cases here)
                        nextBox = "Accessory Box (13x10x5)";
                        nextBoxValue = packingItem.boxAccessories;
                        nextBoxWeightSingle = packingItemWeight.boxAccessories;
                        // or no change. return or do nothing, whatever
                        // DEBUGGING level 3
                        // if (valueDebug >= 1) {
                        //     window.alert("5 INSIDE ELSE:\n (totalValueCurrent - totalValueJuncBox - totalValueInsulPouch) == " + tempWindowalertVariable98sfhn + "\n currentItemName == " + currentItemName);
                        // }
                    }
                }
                //// Duplicated many of these from above, since they apply whether or not there's no juncBox (if the accessories total is within range)
                // TODO:  Make sure the subtraction on the left is working as expected
                // or if the total accessories (minus juncBox and insulPouch) are greater than or equal to 3 accessory boxes, then pack in a 14x14 instead
                else if ((totalValueCurrent - totalValueJuncBox - totalValueInsulPouch) >= (3 * packingItem.boxAccessories)) {
                    // DEBUGGING level 3
                    // if (valueDebug >= 1) {
                    //     window.alert("7 INSIDE ELSE IF:\n (totalValueCurrent - totalValueJuncBox - totalValueInsulPouch) == " + tempWindowalertVariable98sfhn + "\n (packingItem.boxAccessories * 3) == " + tempWindowalertVariable354drt);
                    // }
                    nextBox = "Large Accessory Box (14x14x14)";
                    nextBoxValue = packingItem.box14x14;
                    nextBoxWeightSingle = packingItemWeight.box14x14;
                }
                else if ((valueRecirc == 1 && valueFourHour == 0) && (totalValueCurrent == packingItem.recirc)) {
                    // FUNCTION:  Puts the Recirc or Four hour timer into its own box if this is the only overflow item
                    nextBox = "Recirc/Four Hour Box (9x4x3)";
                    nextBoxValue = packingItem.boxRecirc;
                    nextBoxWeightSingle = packingItemWeight.boxRecirc;
                }
                else if ((valueRecirc == 0 && valueFourHour == 1) && (totalValueCurrent == packingItem.fourHour)) {
                    // FUNCTION:  Puts the Recirc or Four hour timer into its own box if this is the only overflow item
                    nextBox = "Recirc/Four Hour Box (9x4x3)";
                    nextBoxValue = packingItem.boxRecirc;
                    nextBoxWeightSingle = packingItemWeight.boxRecirc;
                }
                else {
                    // Default back to an accessory box
                    // TODO:  Check to make sure this isn't overriding other special circumstances like recirc pump box (it probably is. may need to move those if cases here)
                    nextBox = "Accessory Box (13x10x5)";
                    nextBoxValue = packingItem.boxAccessories;
                    nextBoxWeightSingle = packingItemWeight.boxAccessories;
                    // or no change. return or do nothing, whatever
                    // DEBUGGING level 3
                    // if (valueDebug >= 1) {
                    //     window.alert("8 INSIDE ELSE:\n (totalValueCurrent - totalValueJuncBox - totalValueInsulPouch) == " + tempWindowalertVariable98sfhn + "\n (packingItem.boxAccessories * 3) == " + tempWindowalertVariable354drt);
                    // }
                }

                // FUNCTION:  Call function to build list of all items and what boxes they go in (displayed later through hidden div)
                // Use the values found in conditions directly above to determine first box
                outputStringFunc = buildOutputString(nextBox, nextBoxValue, nextBoxWeightSingle);
                // outputStringFunc = buildOutputString("Accessory Box (13x10x5)", packingItem.boxAccessories, packingItemWeight.boxAccessories);
            }
            else {
                window.alert("yo something is wrong with the LDS value.\n valueLds = " + valueLds);
                // FUNCTION:  Call function to build list of all items and what boxes they go in (displayed later through hidden div)
                outputStringFunc = buildOutputString("Accessory Box (13x10x5)", packingItem.boxAccessories, packingItemWeight.boxAccessories);
            }








            // FORM VALIDATION

            // I don't think this is called specifically from pressing submit, but it just calls itself within a larger function called upon submit
            // This runs after the output string is built (from the conditions above calling the  buildOutputString  function)
            // TODO: May wanna move this above the conditions above that call the  buildOutputString  function
            // (would have to rewrite a bit to call the conditions above instead of calling the  resultsOutput  function)
            formValidation();
            function formValidation() {
                // FUNCTION:  Show warning that B3 isn't done, if selected
                alertUnfinishedFeature1();
                function alertUnfinishedFeature1() {
                    var elementSelectSplitSystem = document.getElementById("selectSplitSystem");
                    if (selectSplitSystem.value == 3) {
                        window.alert("Rules for B3 systems are not complete. Ask the warehouse for the proper packaging configuration");
                    }
                }

                // Form validation for number of POLDs
                // Only validate the number of polds if you're dealing with leak rope, otherwise it's fine
                if (valueLeakRopeCheck == 1) {
                    var totalPoldInputCalculated = valuePoldPin + valuePoldLeakRope2ft + valuePoldLeakRope5ft + valuePoldLeakRope10ft;
                    if (valuePold == totalPoldInputCalculated) {
                        // Leak rope validation passed, so go to the next validation function
                        // window.alert("You chose wisely.\nvaluePold, totalPoldInputCalculated\n" + valuePold + ", " + totalPoldInputCalculated);
                        formValidation2();
                    }
                    else {
                        // Form validation failed, so it doesn't go to the next form validation function
                        window.alert("POLD values are incorrect. \n\nMake sure the number of POLDs (with pins) plus the number of POLDs (with leak rope) equals the total number of POLDs.");
                        //\nvaluePold, totalPoldInputCalculated\n" + valuePold + ", " + totalPoldInputCalculated
                    }
                }
                // If valueLeakRopeCheck == 0 (no leak rope)
                else {
                    // No POLD form validation needed, so go to the next function
                    formValidation2();
                }

                // Form validation for number of SSRs
                function formValidation2() {
                    // Only validate the number of SSRs if you have more than 0
                    if (valueSsr > 0) {
                        // If amount of SSR is even
                        if (valueSsr % 2 == 0) {
                            // window.alert("Nice");
                            resultsOutput();
                        }
                        // If amount of SSR is odd
                        else {
                            // FUNCTION:  Shows an Ok/Cancel popup
                            // SOURCE:  https://stackoverflow.com/a/9334679
                            var answer = window.confirm("Alert:\nSolid State Relays (SSR) are typically sent in groups of 2.\nAre you sure you want to send an odd number of SSR?");
                            // If they click Ok
                            if (answer) {
                                resultsOutput();
                            }
                            // If they click Cancel
                            else {
                                // Nothing happens. Doesn't continue to resultsOutput()
                            }
                        }
                    }
                    // If valueSsr == 0 (no ssr)
                    else {
                        // No ssr form validation needed, so go to the next function
                        resultsOutput();
                    }
                }

            }








            ///////////////////////////
            // FINAL COMMAND THAT RUNS:
            ///////////////////////////

            // FUNCTION:  List all items & boxes they go in (outputStringFunc is the return string value from calling buildOutputString function below, from above)
            // This runs after the output string is built (from the  formValidation  conditions above calling the  buildOutputString  function)
            // HISTORY:  Old method was to show an alert. I'm now showing a full page printable list.
            function resultsOutput() {


                // FUNCTION:  Hide saveButton/printButton if less than 2 boxes
                // If boxes < 2 hide print button, or if boxes >= 2 show print button
                var idPrintButton = document.getElementById("printButton");
                var idSaveButton = document.getElementById("saveButton");
                if (boxTotal < 2) {
                    idPrintButton.style.display = "none";
                    // window.alert("boxTotal < 2  " + idPrintButton.value);
                    idSaveButton.style.display = "none";
                }
                else if (boxTotal >= 2) {
                    idPrintButton.style.display = "block";
                    // window.alert("boxTotal >= 2  " + idPrintButton.value);
                    idSaveButton.style.display = "block";
                }



                // FUNCTION:  Hide form
                var elementToToggle = document.getElementById("mainForm");
                elementToToggle.style.display = "none";

                // FUNCTION:  Hide pageTitle
                var elementToToggle = document.getElementById("pageTitle");
                elementToToggle.style.display = "none";

                // FUNCTION:  Show results div
                var elementToToggle = document.getElementById("resultsBoxContainer");
                elementToToggle.style.display = "block";


                // FUNCTION:  Show text output in results div
                // TIP:  Add <pre> HTML tag to maintain line breaks ("preformatted text")
                // TIP:  You could also replace the \n with <br> if you want HTML formatted line breaks
                // TODO:  Change from <pre> text to something better (can't really format it)
                //var outputStringFuncParsed = JSON.parse(outputStringFunc);
                //document.getElementById("resultsBox").innerHTML = outputStringFuncParsed;
                // With <pre> tag surrounding it
                //document.getElementById("resultsBox").innerHTML = "<pre>" + outputStringFunc + "</pre>";
                // With <p> tag surrounding it
                //document.getElementById("resultsBox").innerHTML = "<p>" + outputStringFunc + "</p>";
                // WIth no tag surrounding it (besides the one already there in the html up at the top)
                document.getElementById("resultsBox").innerHTML = outputStringFunc;



                // FUNCTION:  Replace the innerhtml of boxTotal class spans with the actual boxTotal
                // Otherwise the boxTotal would be increasing every time I output a line to the OutputString i'm building (and not be accurate), 
                // so i output a placeholder first, in a boxTotal div, then at the end, replace the contents of those divs with the actual final boxTotal value
                // SOURCE:  https://stackoverflow.com/a/7409497/1263035  (modified a bit to remove ids)
                var divs = document.getElementsByClassName('boxTotal');
                [].slice.call(divs).forEach(function (div) {
                    div.innerHTML = " of " + boxTotal;
                });

                // Using innerHTML with querySelectorAll (possible alternative method, not using or tried because I saw no point)
                // SOURCE:  https://stackoverflow.com/a/27983501/1263035
                // var x = document.querySelectorAll(".boxTotal");
                // var i;
                // for (i = 0; i < x.length; i++) {
                //     x[i].innerHTML = "";
                // }



                // Scroll results window back to top (for if there's lots of boxes)
                window.scrollTo(0, 0);


            }


















            // FUNCTION:  Function to build list of items to pack, and show in a popup (to use in each LDS size condition below)
            // NOT THE FINAL THING THAT RUNS
            function buildOutputString(initialBox, boxValue, boxWeightSingle) {

                // DEBUGGING
                // window.alert("function buildOutputString(initialBox, boxValue) {   boxValue\n" + " " + boxValue);


                // FUNCTION:  List all items and what boxes they go in
                // TODO:  Change valueLds to number/amount of LDS entered, then add valueLdsSize for each valve size?

                // Initialize the variable to a string
                outputString = " ";



                //// ADD HEADER ////

                // Add "SO#" header (top of every page, in newBox sections)
                if (valueSoNum > 0) {
                    outputString = outputString + "<div class='text-end'><i>SO# " + valueSoNum + "</i></div>";
                }

                // Add "Replacement" header if checkbox is checked
                if (valueReplacement > 0) {
                    outputString = outputString + "-- Replacement --<br>";
                }

                // Add "-- POLD System --" header if radio checkbox button selected
                // SOURCE:  https://stackoverflow.com/a/1423783
                if (document.getElementById('btnradio2').checked) {
                    outputString = outputString + "-- POLD System --<br>";
                }
                // Old way:
                // if (valueSystemPold > 0) {
                //     outputString = outputString + "-- POLD System --<br>";
                // }

                // Add "-- Accessories Only --" header if radio checkbox button selected
                if (document.getElementById('btnradio3').checked) {
                    outputString = outputString + "-- Accessories Only --<br>";
                }

                // Add the first box name, and current/total box numbers
                // TODO:  Might want to change this to only display once things are packed in this box (maybe show later in the packing function/loop)
                // HISTORY:  It was showing an empty accessory box if only junction box/insulated pouch is being sent
                // FIX:  If statement added, to only show this first box line if there's an item to pack besides junction box or insulated pouch (which don't go into an accessory or LDS box)
                if (valueLds >= 1 || valueApi >= 1 || valueCp >= 1 || valueFourHour >= 1 || valueLeakRopeCheck >= 1 || valuePam1 >= 1 || valuePold >= 1 || valuePoldPin >= 1 || valueRecirc >= 1 || valueScv >= 1 || valueSsr >= 1) {
                    outputString = outputString + "<b>" + initialBox + "</b><i>&nbsp; [Box " + boxNumber + "<span class='boxTotal'>boxTotal</span>" + "]: </i><br>";
                }


                // It didn't work to access & modify this variable if it was declared outside the function, so I declared it inside
                // Initialize a variable to tell how many items are left to pack (to know when you're done, and display info like the final box weight)
                var itemsTotalLeft = valueTotal;
                // HISTORY:  Changed from using this variable to calculate how much total space value was left to pack, to how many total items are left to pack (since some items have 0 space value)
                // I still need this variable though because I'm doing other calculations like seeing if I can fit leftovers in 14x14  if ((totalValueCurrent - totalValueJuncBox - totalValueInsulPouch) <= (packingItem.box14x14 - packingItem.juncBox)) 
                totalValueCurrent = totalValueTotal;

                // Initialze a variable to track how much space is left in each box, so once it hits a low number, it moves on to next box
                var boxValueLeft = boxValue;
                // window.alert("totalValueTotal = " + totalValueTotal);
                // window.alert("itemsTotalLeft = " + itemsTotalLeft);
                // window.alert("totalValueCurrent = " + totalValueCurrent);
                // window.alert("valueLds = " + valueLds);

                // Add this line to add a breakpoint
                //debugger






                //// PACKING ITEMS INTO FIRST/LDS BOX ////

                // Panel, SCV, Hidden Wire and Pam1 always in Box 1 -Bryce
                // Currently just hard defining this group of items as always going in the first box (not checking if they fit) (according to Bryce rules)
                // TODO:  Maybe change this if there are enough cases to break it, like multiple control panels or something.
                // TODO:  Maybe change this group into a loop/function since it's basically repeated code (just assign a variable for which current item it's evaluating)
                if (valueLds > 0) {

                    // Weight variables initialized at the top of the  functionOnSubmit  function a few sections above (a few hundred lines up)

                    /// ADD WEIGHT: LDS
                    // Remove the period from the LDS size string to get the right LDS number/variable for weight
                    var valueLdsMinusPeriod = valueLds.replaceAll('.', '');
                    // Not calling a function, just referencing a variable dynamically (packingItemWeight.lds[valueLdsMinusPeriod] aka packingItemWeight.lds200)
                    // REFERENCE:  (variable as part of a variable, within global window.Function())  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/eval#never_use_eval!
                    // Alternative:  https://stackoverflow.com/a/52246274/1263035  // window[dynamicname + '2'] = 'myvalue'
                    weightCurrentBox += Function('return packingItemWeight.lds' + valueLdsMinusPeriod)();
                    weightTotal += Function('return packingItemWeight.lds' + valueLdsMinusPeriod)();

                    // Subtract item value as it's added to a box, to figure out if there's items/overflow value left over
                    // Not using this right now since lds isn't added to the item count
                    // itemsTotalLeft = itemsTotalLeft - valueLdsCheck;
                    // totalValueCurrent was replaced by itemsTotalLeft but I'm still using it for some other calculations so I'm leaving both
                    totalValueCurrent = totalValueCurrent - totalValueLds;
                    boxValueLeft = boxValueLeft - totalValueLds;

                    // Debugging level 0
                    if (valueDebug >= 1) {
                        console.log("valueLds = " + valueLds + "  valueLdsMinusPeriod = " + valueLdsMinusPeriod);
                        console.log("weightCurrentBox = " + weightCurrentBox + "  weightTotal = " + weightTotal);
                        // REFERENCE:  (correcting display of inaccurate floating point math)  https://stackoverflow.com/a/28856155/1263035
                        // EXAMPLE:    parseFloat((a-b).toFixed(2));
                        console.log("parseFloat((weightCurrentBox).toFixed(2)) = " + parseFloat((weightCurrentBox).toFixed(2)) + "\nparseFloat((weightTotal).toFixed(2)) = " + parseFloat((weightTotal).toFixed(2)));
                    };


                    // If split system, add that info
                    if (valueSplitSystemCheck > 0) {
                        // Add item to string to be displayed at the end for what to pack
                        outputString = outputString + "‚Ä¢ LDS (" + valueLds + "\") (Split-System B" + valueSplitSystemSelect + ")<br>";

                        /// ADD WEIGHT: SPLIT-SYSTEM 

                        // Not working:
                        // REFERENCE:  (variable as part of a variable)  https://stackoverflow.com/a/52245867
                        // const packingItemWeightObj = { splitSystemBX: 'packingItemWeight.splitSystemB' + valueSplitSystemSelect };
                        // window.alert("packingItemWeightObj.splitSystemBX = " + packingItemWeightObj.splitSystemBX);
                        // Not working:
                        // REFERENCE:  (referencing a variable name as value)  https://stackoverflow.com/a/5117153
                        // weightCurrentBox = eval(packingItemWeightObj.splitSystemBX);                            
                        // Not working:
                        // REFERENCE:  https://stackoverflow.com/a/52246274
                        // weightCurrentBox = window['packingItemWeight.splitSystemB' + valueSplitSystemSelect];

                        // Working (Long version):
                        // var obj = looseJsonParse();
                        // function looseJsonParse(obj) {
                        //     return Function('"use strict"; return packingItemWeight.splitSystemB' + valueSplitSystemSelect)();
                        // }
                        // weightCurrentBox = obj;

                        // Working (Short version):
                        // REFERENCE:  (variable as part of a variable, within global window.Function())  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/eval#never_use_eval!
                        // Additional weight for split system extras like extra pipe for probe
                        weightCurrentBox += Function('return packingItemWeight.splitSystemB' + valueSplitSystemSelect)();
                        // MEANING:  weightCurrentBox += packingItemWeight.splitSystemB[valueSplitSystemSelect];
                        weightTotal += Function('return packingItemWeight.splitSystemB' + valueSplitSystemSelect)();

                        // Subtract item value as it's added to a box, to figure out if there's items/overflow value left over
                        itemsTotalLeft = itemsTotalLeft - valueSplitSystemCheck;
                        // totalValueCurrent was replaced by itemsTotalLeft but I'm still using it for some other calculations so I'm leaving both
                        totalValueCurrent = totalValueCurrent - totalValueSplitSystemCheck;
                        boxValueLeft = boxValueLeft - totalValueSplitSystemCheck;
                        // Debugging level 0
                        console.log("weightCurrentBox = " + weightCurrentBox + "\nweightTotal = " + weightTotal);
                    }
                    // Otherwise output the normal LDS size info string
                    else {
                        // Add item to string to be displayed at the end for what to pack
                        outputString = outputString + "‚Ä¢ LDS (" + valueLds + "\") <br>";
                        // LDS weight was already calculated before this if/else statement
                    }
                    // Don't subtract LDS value as of now, since it's actually the pipe size and not space taken, plus it equals 0 anyway. 
                    // (We have cases to define which box each LDS size goes in anyway)
                }
                if (valueCp > 0) {
                    // Subtract item value as it's added to a box, to figure out if there's items/overflow value left over
                    itemsTotalLeft = itemsTotalLeft - valueCp;
                    // totalValueCurrent was replaced by itemsTotalLeft but I'm still using it for some other calculations so I'm leaving both
                    totalValueCurrent = totalValueCurrent - totalValueCp;
                    boxValueLeft = boxValueLeft - totalValueCp;
                    // Add item to string to be displayed at the end for what to pack
                    outputString = outputString + "‚Ä¢ " + valueCp + " Control Panel<br>";

                    /// ADD WEIGHT
                    weightCurrentBox += valueCp * packingItemWeight.cp;
                    weightTotal += valueCp * packingItemWeight.cp;
                }
                if (valueScv > 0) {
                    // Subtract item value as it's added to a box, to figure out if there's items/overflow value left over
                    itemsTotalLeft = itemsTotalLeft - valueScv;
                    // totalValueCurrent was replaced by itemsTotalLeft but I'm still using it for some other calculations so I'm leaving both
                    totalValueCurrent = totalValueCurrent - totalValueScv;
                    boxValueLeft = boxValueLeft - totalValueScv;
                    // Add item to string to be displayed at the end for what to pack
                    outputString = outputString + "‚Ä¢ " + valueScv + " Spring Check Valve (SCV)<br>";

                    /// ADD WEIGHT
                    weightCurrentBox += valueScv * packingItemWeight.scv;
                    weightTotal += valueScv * packingItemWeight.scv;
                }
                if (valueHiddenWire > 0) {
                    // Subtract item value as it's added to a box, to figure out if there's items/overflow value left over
                    itemsTotalLeft = itemsTotalLeft - valueHiddenWire;
                    // totalValueCurrent was replaced by itemsTotalLeft but I'm still using it for some other calculations so I'm leaving both
                    totalValueCurrent = totalValueCurrent - totalValueHiddenWire;
                    boxValueLeft = boxValueLeft - totalValueHiddenWire;
                    // Add item to string to be displayed at the end for what to pack
                    outputString = outputString + "‚Ä¢ " + valueHiddenWire + " Hidden Wire (" + valueHiddenWireLength + "ft)<br>";

                    /// ADD WEIGHT
                    // Multiply the number of hidden wires (currently just a 1||0 checkbox) with the length, to calculate weight by cable length
                    weightCurrentBox += valueHiddenWire * valueHiddenWireLength * packingItemWeight.hiddenWire;
                    weightTotal += valueHiddenWire * valueHiddenWireLength * packingItemWeight.hiddenWire;
                }
                if (valuePam1 > 0) {
                    // Subtract item value as it's added to a box, to figure out if there's items/overflow value left over
                    itemsTotalLeft = itemsTotalLeft - valuePam1;
                    // totalValueCurrent was replaced by itemsTotalLeft but I'm still using it for some other calculations so I'm leaving both
                    totalValueCurrent = totalValueCurrent - totalValuePam1;
                    boxValueLeft = boxValueLeft - totalValuePam1;
                    // Add item to string to be displayed at the end for what to pack
                    outputString = outputString + "‚Ä¢ " + valuePam1 + " PAM-1 Relay<br>";

                    /// ADD WEIGHT
                    weightCurrentBox += valuePam1 * packingItemWeight.pam1;
                    weightTotal += valuePam1 * packingItemWeight.pam1;
                }
                // All items above always go into box 1 (according to Bryce)

                // Show box weight if items are all packed before moving on to the next items
                if (itemsTotalLeft <= 0) {
                    // Only show weight if there was more than 0 items to pack
                    if (valueTotal > 0 || valueLds > 0) {
                        // Add the box/packaging weight to the total
                        weightCurrentBox += boxWeightSingle;
                        weightTotal += boxWeightSingle;
                        outputString += " <div class='weightCurrentBox text-muted'><i> &nbsp;  &nbsp;  &nbsp;  &nbsp; (approximate box weight: " + parseFloat((weightCurrentBox).toFixed(0)) + " lbs)</i><br></div>";
                        // DEBUGGING to show info every time a single item is packed (1 line)
                        if (valueDebug >= 1) {
                            outputString = outputString + "<br> DEBUGGING INFO: weight1  itemsTotalLeft = " + itemsTotalLeft + ".  boxValueLeft = " + boxValueLeft + ".  weightCurrentBox = " + weightCurrentBox + "<br>";
                        }
                    }
                    else {
                        outputString += "<br><i>Nothing to pack?</i><br>&nbsp;";
                    }
                }




                //// CHOOSING NEXT BOX /////

                //// Accessory Box (13x10x5)
                // The following items will fit in current box or create a new box (accessories box is default extra)
                // Define the accessory box as the next box to overflow items into, unless there's a junction box or total >= 49
                // HISTORY:  Changed this section to avoid a mostly empty 14x14 before packing the juncBox (added IF statements after filling first box)
                var nextBox = "Accessory Box (13x10x5)";
                var nextBoxValue = packingItem.boxAccessories;
                var nextBoxWeightSingle = packingItemWeight.boxAccessories;
                // var boxWeightSingle  is defined in buildOutputString function arguments


                //// Medium Shipper
                // HISTORY:  Medium shipper condition for insulated pouch was moved to the section where it checks if there's an insulated pouch and sends it to be packed 
                // (otherwise the first item sent to be packed will end up in the medium shipper, instead of the insulated pouch going in there)



                //// Large Accessory Box (14x14x14)
                // Large Accessory Box (14x14x14) = 48 (Use only if EJB is included or if point total is greater than or equal to 49) -Bryce
                // TODO:  Changing this to avoid a mostly empty 14x14 before packing the juncBox
                // This is the overflow box and not the primary box

                // Old version //
                // if (totalValueTotal >= 49 || valueJuncBox > 0) {
                //     nextBox = "Large Accessory Box (14x14x14)";
                //     nextBoxValue = packingItem.box14x14;
                // }

                // New Version //
                // Moved to packing section



                //// Recirc/Four Hour Box (9x4x3)
                // The four hour timer box is only used if a single timer or recirc switch is sent, or it's the only overflow item,
                //  but if both are sent, then they'll be in an accessory box like any other scenario
                // TODO:  Make case for determining if this is the only overflow item (I think i did this already?)
                if ((valueFourHour == 1 || valueRecirc == 1) && (totalValueTotal == packingItem.fourHour || totalValueTotal == packingItem.recirc)) {
                    nextBox = "Recirc/Four Hour Box (9x4x3)";
                    nextBoxValue = packingItem.boxRecirc;
                    nextBoxWeightSingle = packingItemWeight.boxRecirc;
                }

















                // Declaring this variable outside of the function so I can use it in the Insulated Pouch section below
                var currentItemCountInBoxOfCurrentItem;


                // FUNCTION:  PACK ITEM FUNCTION (one at a time, instead of item bundles)
                // (Called below, after the function)
                // (valueCurrentItem = how many, subtracted every time one is packed)
                function putInBox(valueCurrentItem, spaceSingleCurrentItem, spaceSingleCurrentItemVariableName, totalValueCurrentItem, currentItemName) {

                    if (valueCurrentItem > 0) {

                        var loopCount = 0;
                        var loopCountElse = 0;
                        currentItemCountInBoxOfCurrentItem = 0;

                        // Change the variable name from retrieving item space to weight
                        var weightSingleCurrentItemVariableName = spaceSingleCurrentItemVariableName.replace('packingItem', 'packingItemWeight');
                        // Replacement code for eval(), to resolve variable name to a variable. (or to use variable values in variable name). made by me
                        // REFERENCE:  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/eval#never_use_eval!
                        weightSingleCurrentItem = Function('return ' + weightSingleCurrentItemVariableName)();

                        // TODO:  Add box weight to the weight calculation
                        // Change the variable name from retrieving box space to weight
                        // var weightBoxValueVariableName = boxValue.replace('packingItem', 'packingItemWeight');
                        // weightSingleCurrentItem = Function('return ' + weightSingleCurrentItemVariableName)();


                        // Keep packing each single item until the total count of the current item type hits 0 (then exit the loop/function, to move on to the next item type. 
                        // (e.g. keep looping/packing one API at a time until APIs hit 0)
                        while (valueCurrentItem > 0) {
                            // If the space required for a single item of the current item type is equal to or less than the space left in the current box, then pack it
                            if (spaceSingleCurrentItem <= boxValueLeft) {
                                //// PACK ONE ITEM AT A TIME ////
                                // Reduce number of all combined items to see if you have any leftovers at the very end that never got packed
                                itemsTotalLeft--;
                                // Reduce value of all combined items for other calculations like to see if you can fit accessories minus insulated pouch in 14x14
                                totalValueCurrent = totalValueCurrent - spaceSingleCurrentItem;
                                // Subtract single item value from box space remaining
                                boxValueLeft = boxValueLeft - spaceSingleCurrentItem;
                                // New variable to track if all of the current item type has been packed (might not need this one anymore since i switched to valueCurrentItem for the while loop condition)
                                // HISTORY:  This was messing up my Object.keys code below since it has the same name as the function argument
                                // Now the debugging string will be missing an updated  totalValueCurrentItem  variable
                                //totalValueCurrentItem = totalValueCurrentItem - spaceSingleCurrentItem;
                                // New variable to track if all of the current item type has been packed (better version, tracking item count, not space taken, which can equal 0 even if there are items left)
                                valueCurrentItem--;
                                // Keep count of how many of the current item has been packed into the box.
                                currentItemCountInBoxOfCurrentItem++;
                                /// ADD WEIGHT
                                // (Variables declared outside all functions)
                                weightCurrentBox += weightSingleCurrentItem;
                                weightTotal += weightSingleCurrentItem;
                                // Debugging level 0
                                // REFERENCE:  (correcting display of inaccurate floating point math)  https://stackoverflow.com/a/28856155/1263035
                                // EXAMPLE:    parseFloat((a-b).toFixed(2));
                                console.log("spaceSingleCurrentItemVariableName = " + spaceSingleCurrentItemVariableName + "  weightSingleCurrentItem = " + weightSingleCurrentItem);
                                console.log("parseFloat((weightCurrentBox).toFixed(2)) = " + parseFloat((weightCurrentBox).toFixed(2)) + "\nparseFloat((weightTotal).toFixed(2)) = " + parseFloat((weightTotal).toFixed(2)));

                                // It outputs which items were just packed near the end of this function, just outside the while loop

                                loopCount++;

                                // DEBUGGING to show info every time a single item is packed (1 line)
                                if (valueDebug >= 1) {
                                    outputString = outputString + "<br> DEBUGGING INFO: itemsTotalLeft = " + itemsTotalLeft + ".  boxValueLeft = " + boxValueLeft + ".  totalValueCurrentItem = " + totalValueCurrentItem + ".  spaceSingleCurrentItem = " + spaceSingleCurrentItem + ".  totalValueCurrent = " + totalValueCurrent + ". weightCurrentBox = " + weightCurrentBox + "<br>";
                                }
                            }
                            // Otherwise, show how many have been packed into this box, then move on to the next box and keep packing
                            // Then go back to the if statement to keep packing in this new box until it runs out of room, then output packed items and weight
                            else {
                                ///// FINISH THE PREVIOUS BOX /////

                                // NOTE:  (Copied this else statement to  // Pack  Insulated Pouch  &  // Pack  Four Hour Timer  &  // Pack  Recirc Pump Switch  section as well. KEEP IT UPDATED)
                                // I think I eliminated some of those external copied statements by bringing more nextBox calculations into this putInBox function (below)
                                // Display how many of this item has been packed into the current box, before switching boxes (if there are 1 or more in there)
                                if (currentItemCountInBoxOfCurrentItem >= 1) {
                                    outputString = outputString + "‚Ä¢ " + currentItemCountInBoxOfCurrentItem + " " + currentItemName + "<br>";
                                }

                                // Debugging level 0
                                // console.log("valueLds = " + valueLds + "  valueLdsMinusPeriod = " + valueLdsMinusPeriod);
                                // console.log("weightCurrentBox = " + weightCurrentBox + "  weightTotal = " + weightTotal);
                                // REFERENCE:  (correcting display of inaccurate floating point math)  https://stackoverflow.com/a/28856155/1263035
                                // EXAMPLE:    parseFloat((a-b).toFixed(2));
                                if (valueDebug >= 1) {
                                    console.log("parseFloat((weightCurrentBox).toFixed(2)) = " + parseFloat((weightCurrentBox).toFixed(2)) + "\nparseFloat((weightTotal).toFixed(2)) = " + parseFloat((weightTotal).toFixed(2)));
                                }


                                /// Show weight (before new box)
                                // If nothing has been packed yet, don't show info for an empty accessory box first
                                if (itemsTotalLeft == valueTotal) {
                                    // Don't show the weight (if nothing has been packed yet)
                                }
                                else {
                                    // Copied this to the  // Pack  Insulated Pouch  section as well (since it has a copy of this else statement)
                                    // Add the box/packaging weight to the total
                                    weightCurrentBox += boxWeightSingle;
                                    weightTotal += boxWeightSingle;
                                    outputString += " <div class='weightCurrentBox text-muted'><i> &nbsp;  &nbsp;  &nbsp;  &nbsp; (approximate box weight: " + parseFloat((weightCurrentBox).toFixed(0)) + " lbs)</i><br></div>";
                                    // DEBUGGING to show which code is displaying weight
                                    if (valueDebug >= 1) {
                                        outputString = outputString + "<br> DEBUGGING INFO: weight3  else (newbox) itemsTotalLeft = " + itemsTotalLeft + ".  boxValueLeft = " + boxValueLeft + ".  totalValueCurrentItem = " + totalValueCurrentItem + ".  spaceSingleCurrentItem = " + spaceSingleCurrentItem + ".  totalValueCurrent = " + totalValueCurrent + ". weightCurrentBox = " + weightCurrentBox + ". weightSingleCurrentItem = " + weightSingleCurrentItem + "<br>";
                                    }
                                }
                                // DEBUGGING
                                if (valueDebug >= 1) {
                                    outputString = outputString + "<br> DEBUGGING INFO: last boxValue = " + boxValue + ".  boxValueLeft = " + boxValueLeft + ". weightCurrentBox = " + weightCurrentBox + ". weightTotal = " + weightTotal + "<br>";
                                }







                                // Tried to make this a function i could call to pick the first box, 
                                //  but I need to pull it out of this parent function, and remove some lines/variables
                                // chooseNextBox();
                                // function chooseNextBox() {


                                //// START THE NEXT BOX

                                //// EXCEPTION FOR SELECTING 14X14 AS NEXTBOX RIGHT AFTER FILLING THE FIRST BOX ////

                                // Change rules to prevent 2 14x14s when packing EJB with second mostly empty.
                                // (actually we won't have a negative value because the juncBoxes are all added to the total, so using totalValueJuncBox should work)
                                // This should pack juncBox plus up to 12pt of accessories in a 14x14.

                                // Run only directly after the first box is filled (standard shipper, large shipper, or medium shipper not with insulated pouch)
                                // TODO:  This is also running after packing an Accessory Box, since it has the same value as Standard Shipper / boxLds (12)
                                // TODO:  Might wanna change that if it's causing problems, but it actually worked out nicely when testing a POLD-Only system scenario
                                // DEBUGGING
                                // if (valueDebug >= 1) {
                                //     window.alert("1 BEFORE 14x14 IF:\n boxValue == " + boxValue + "\n currentItemName == " + currentItemName);
                                // }

                                // HISTORY:  Removed this condition so it analyzes after every box (I was getting too many 14x14s)
                                // if ((boxValue == packingItem.boxLds) || (boxValue == packingItem.boxLdsLarge) || ((boxValue == packingItem.boxLdsMedium) && (currentItemName != "Insulated Pouch"))) {

                                // DEBUGGING level 3
                                // if (valueDebug >= 1) {
                                //     window.alert("2 INSIDE 14x14 IF:\n boxValue == " + boxValue + "\n currentItemName == " + currentItemName);
                                // }

                                // DEBUGGING
                                // For last Else If (putting it right above the else if causes an error. prob not supposed to have statements in between if/elses) (may not need this anymore)
                                var tempWindowalertVariable98sfhn = (totalValueCurrent - totalValueJuncBox - totalValueInsulPouch);
                                var tempWindowalertVariable354drt = (3 * packingItem.boxAccessories);
                                // window.alert("6 BEFORE ELSE IF:\n (totalValueCurrent - totalValueJuncBox - totalValueInsulPouch) == " + tempWindowalertVariable98sfhn + "\n (packingItem.boxAccessories * 3) == " + tempWindowalertVariable354drt);

                                // See if we have 1 or more juncBox present first:
                                if (valueJuncBox >= 1) {
                                    // then subtracTing the value of the juncBoxes and insulPouches from the totalValueCurrent (since we're only worried about the other accessories that will be packed in this box), 
                                    // and see if it's less than the space remaining in a 14x14 after packing a juncBox:
                                    // TODO:  Make sure the subtraction on the left is working as expected
                                    // This should allow packing up to 12pt of accessories in a 14x14 plus a juncBox
                                    if ((totalValueCurrent - totalValueJuncBox - totalValueInsulPouch) <= (packingItem.box14x14 - packingItem.juncBox)) {
                                        nextBox = "Large Accessory Box (14x14x14)";
                                        nextBoxValue = packingItem.box14x14;
                                        nextBoxWeightSingle = packingItemWeight.box14x14;
                                        // DEBUGGING level 3
                                        // if (valueDebug >= 1) {
                                        //     window.alert("3 INSIDE IF1:\n (totalValueCurrent - totalValueJuncBox - totalValueInsulPouch) == " + tempWindowalertVariable98sfhn + "\n currentItemName == " + currentItemName);
                                        // }
                                    }
                                    // or if the total accessories (minus juncBox and insulPouch) are greater than or equal to 3 accessory boxes, then pack in a 14x14 instead
                                    // TODO:  Make sure the subtraction on the left is working as expected
                                    else if ((totalValueCurrent - totalValueJuncBox - totalValueInsulPouch) >= (packingItem.boxAccessories * 3)) {
                                        nextBox = "Large Accessory Box (14x14x14)";
                                        nextBoxValue = packingItem.box14x14;
                                        nextBoxWeightSingle = packingItemWeight.box14x14;
                                        // DEBUGGING level 3
                                        // if (valueDebug >= 1) {
                                        //     window.alert("4 INSIDE IF2:\n (totalValueCurrent - totalValueJuncBox - totalValueInsulPouch) == " + tempWindowalertVariable98sfhn + "\n currentItemName == " + currentItemName);
                                        // }
                                    }
                                    else {
                                        // Default back to an accessory box
                                        // TODO:  Check to make sure this isn't overriding other special circumstances like recirc pump box (it probably is. may need to move those if cases here)
                                        nextBox = "Accessory Box (13x10x5)";
                                        nextBoxValue = packingItem.boxAccessories;
                                        nextBoxWeightSingle = packingItemWeight.boxAccessories;
                                        // or no change. return or do nothing, whatever
                                        // DEBUGGING level 3
                                        // if (valueDebug >= 1) {
                                        //     window.alert("5 INSIDE ELSE:\n (totalValueCurrent - totalValueJuncBox - totalValueInsulPouch) == " + tempWindowalertVariable98sfhn + "\n currentItemName == " + currentItemName);
                                        // }
                                    }

                                    //// CONDITIONS PER ITEM TYPE
                                    // If current item is Junction Box, Set as Large Accessory Box
                                    if (spaceSingleCurrentItemVariableName == "packingItem.juncBox") {
                                        // Large Accessory Box (14x14x14) = 48 (Use only if EJB is included or if Point total is greater than or equal to 49) -Bryce
                                        // Might need to reset it back to accessory box afterward
                                        nextBox = "Large Accessory Box (14x14x14)";
                                        nextBoxValue = packingItem.box14x14;
                                        nextBoxWeightSingle = packingItemWeight.box14x14;
                                    }
                                    // If current item is insulated pouch, Set as medium shipper
                                    else if (spaceSingleCurrentItemVariableName == "packingItem.insulPouch") {
                                        // Medium Shipper (20x12x8) = 6 (Used for 2" systems or Insulated Pouch only) -Bryce
                                        // NOTE:  Insulated Pouch will always only fit into the medium shipper. -Bryce
                                        nextBox = "Medium Shipper (20x12x8)";
                                        nextBoxValue = packingItem.boxLdsMedium;
                                        nextBoxWeightSingle = packingItemWeight.boxLdsMedium;
                                    }
                                    // If current item is recirc pump, see if it's the only overflow item (and put it in its own box if so)
                                    else if (spaceSingleCurrentItemVariableName == "packingItem.recirc") {
                                        // FUNCTION:  Puts the Recirc or Four hour timer into its own box if this is the only overflow item
                                        if ((valueRecirc == 1 && valueFourHour == 0) && (totalValueCurrent == packingItem.recirc) && (boxValueLeft < packingItem.recirc)) {
                                            nextBox = "Recirc/Four Hour Box (9x4x3)";
                                            nextBoxValue = packingItem.boxRecirc;
                                            nextBoxWeightSingle = packingItemWeight.boxRecirc;
                                        }
                                    }
                                    // If current item is four hour timer, see if it's the only overflow item (and put it in its own box if so)
                                    else if (spaceSingleCurrentItemVariableName == "packingItem.fourHour") {
                                        if ((valueRecirc == 0 && valueFourHour == 1) && (totalValueCurrent == packingItem.fourHour) && (boxValueLeft < packingItem.fourHour)) {
                                            nextBox = "Recirc/Four Hour Box (9x4x3)";
                                            nextBoxValue = packingItem.boxRecirc;
                                            nextBoxWeightSingle = packingItemWeight.boxRecirc;
                                        }
                                    }
                                }

                                //// Duplicated many of these from above, since they apply whether or not there's no juncBox (if the accessories total is within range)
                                // TODO:  Make sure the subtraction on the left is working as expected
                                // or if the total accessories (minus juncBox and insulPouch) are greater than or equal to 3 accessory boxes, then pack in a 14x14 instead
                                else if ((totalValueCurrent - totalValueJuncBox - totalValueInsulPouch) >= (3 * packingItem.boxAccessories)) {
                                    // DEBUGGING level 3
                                    // if (valueDebug >= 1) {
                                    //     window.alert("7 INSIDE ELSE IF:\n (totalValueCurrent - totalValueJuncBox - totalValueInsulPouch) == " + tempWindowalertVariable98sfhn + "\n (packingItem.boxAccessories * 3) == " + tempWindowalertVariable354drt);
                                    // }
                                    nextBox = "Large Accessory Box (14x14x14)";
                                    nextBoxValue = packingItem.box14x14;
                                    nextBoxWeightSingle = packingItemWeight.box14x14;
                                }
                                else {
                                    // Default back to an accessory box
                                    // TODO:  Check to make sure this isn't overriding other special circumstances like recirc pump box (it probably is. may need to move those if cases here)
                                    nextBox = "Accessory Box (13x10x5)";
                                    nextBoxValue = packingItem.boxAccessories;
                                    nextBoxWeightSingle = packingItemWeight.boxAccessories;
                                    // or no change. return or do nothing, whatever
                                    // DEBUGGING level 3
                                    // if (valueDebug >= 1) {
                                    //     window.alert("8 INSIDE ELSE:\n (totalValueCurrent - totalValueJuncBox - totalValueInsulPouch) == " + tempWindowalertVariable98sfhn + "\n (packingItem.boxAccessories * 3) == " + tempWindowalertVariable354drt);
                                    // }
                                }

                                //// CONDITIONS PER ITEM TYPE
                                // If current item is Junction Box, Set as Large Accessory Box
                                if (spaceSingleCurrentItemVariableName == "packingItem.juncBox") {
                                    // Large Accessory Box (14x14x14) = 48 (Use only if EJB is included or if Point total is greater than or equal to 49) -Bryce
                                    // Might need to reset it back to accessory box afterward
                                    nextBox = "Large Accessory Box (14x14x14)";
                                    nextBoxValue = packingItem.box14x14;
                                    nextBoxWeightSingle = packingItemWeight.box14x14;
                                }
                                // If current item is insulated pouch, Set as medium shipper
                                else if (spaceSingleCurrentItemVariableName == "packingItem.insulPouch") {
                                    // Medium Shipper (20x12x8) = 6 (Used for 2" systems or Insulated Pouch only) -Bryce
                                    // NOTE:  Insulated Pouch will always only fit into the medium shipper. -Bryce
                                    nextBox = "Medium Shipper (20x12x8)";
                                    nextBoxValue = packingItem.boxLdsMedium;
                                    nextBoxWeightSingle = packingItemWeight.boxLdsMedium;
                                }
                                // If current item is recirc pump, see if it's the only overflow item (and put it in its own box if so)
                                else if (spaceSingleCurrentItemVariableName == "packingItem.recirc") {
                                    // FUNCTION:  Puts the Recirc or Four hour timer into its own box if this is the only overflow item
                                    // Changed IF condition to work when there's one recirc left, even if there were recircs packed already
                                    // if ((valueRecirc == 1 && valueFourHour == 0) && (totalValueCurrent == packingItem.recirc) && (boxValueLeft < packingItem.recirc)) {
                                    if ((totalValueCurrent == packingItem.recirc) && (boxValueLeft < packingItem.recirc)) {
                                        nextBox = "Recirc/Four Hour Box (9x4x3)";
                                        nextBoxValue = packingItem.boxRecirc;
                                        nextBoxWeightSingle = packingItemWeight.boxRecirc;
                                    }
                                }
                                // If current item is four hour timer, see if it's the only overflow item (and put it in its own box if so)
                                else if (spaceSingleCurrentItemVariableName == "packingItem.fourHour") {
                                    // Changed IF condition to work when there's one fourHour left, even if there were recircs or fourHours packed already
                                    // if ((valueRecirc == 0 && valueFourHour == 1) && (totalValueCurrent == packingItem.fourHour) && (boxValueLeft < packingItem.fourHour)) {
                                    if ((totalValueCurrent == packingItem.fourHour) && (boxValueLeft < packingItem.fourHour)) {
                                        nextBox = "Recirc/Four Hour Box (9x4x3)";
                                        nextBoxValue = packingItem.boxRecirc;
                                        nextBoxWeightSingle = packingItemWeight.boxRecirc;
                                    }
                                }

                                //// END EXCEPTION FOR 14X14 (then continue the packing loop) ////




                                // If nothing has been packed yet, don't increase the box number (for an empty accessory box)
                                // (Must have this statement above the  itemsTotalLeft--;  line below)
                                if (itemsTotalLeft == valueTotal) {
                                    // Don't increase the box number (if nothing has been packed yet)
                                }
                                else {
                                    // Add 1 to the boxTotal and boxNumber
                                    boxNumber++;
                                    boxTotal++;
                                }
                                // Change current box to whatever box is next (like accessory box or 14x14)
                                boxValue = nextBoxValue;
                                // Change current box packaging weight to next box packaging weight
                                boxWeightSingle = nextBoxWeightSingle;
                                // Resets the space remaining in the box to the full total of the new empty box
                                boxValueLeft = boxValue;
                                // Reduce number of all combined items to see if you have any leftovers at the very end that never got packed
                                itemsTotalLeft--;

                                totalValueCurrent = totalValueCurrent - spaceSingleCurrentItem;
                                // Reset current box weight to 0
                                weightCurrentBox = 0;
                                // Add weight of current item
                                weightCurrentBox += weightSingleCurrentItem;
                                weightTotal += weightSingleCurrentItem;
                                // Removed since that should only happen at the end of a box, before displaying the last packed item
                                // Right now we're just packing an item and showing the new box name, then it goes back up to the if/else statement for continuing packing this box
                                // // Add weight of nextBox
                                // weightCurrentBox += boxWeightSingle;
                                // weightTotal += boxWeightSingle;
                                // Subtract single item value from box space remaining
                                boxValueLeft = boxValueLeft - spaceSingleCurrentItem;
                                // Old variable to track if all of the current item type has been packed (might not need this one anymore since i switched to valueCurrentItem for the while loop condition)
                                totalValueCurrentItem = totalValueCurrentItem - spaceSingleCurrentItem;
                                // New variable to track if all of the current item type has been packed (better version, tracking item count, not space taken, which can equal 0 even if there are items left)
                                valueCurrentItem--;
                                // Keep count of how many of the current item has been packed into the box (reset the count to 1 when changing boxes).
                                currentItemCountInBoxOfCurrentItem = 1;

                                // Add item to string to be displayed at the end for what to pack
                                // List the current box number and a placeholder for boxTotal, to be replaced at the end with innderHTML javascript (since we don't know the total number of boxes until it ends)
                                // If there's an SO#, add it to the top of the page for each box
                                // NOTE:  Added newBoxBefore1 and newBoxBefore2 to fix html2pdf inserting the page break in wrong location (issue with nested divs)
                                if (valueSoNum > 0) {
                                    outputString = outputString + "<br><div class='newBoxBefore1'>&nbsp;</div><div class='newBoxBefore2'>&nbsp;</div><div class='newBox'><div class='soBox text-end'><i>SO# " + valueSoNum + "</i></div><b>" + nextBox + "</b><i>&nbsp; [Box " + boxNumber + "<span class='boxTotal'>boxTotal</span>" + "]: </i></div>";
                                }
                                else {
                                    outputString = outputString + "<br><div class='newBoxBefore1'>&nbsp;</div><div class='newBoxBefore2'>&nbsp;</div><div class='newBox'><b>" + nextBox + "</b><i>&nbsp; [Box " + boxNumber + "<span class='boxTotal'>boxTotal</span>" + "]: </i></div>";
                                }
                                // outputString = outputString + "‚Ä¢ " + currentItemCountInBoxOfCurrentItem + " " + currentItemName + "<br>";

                                // HISTORY:  This broke using the 14x14 when you had a lot of items, so I removed it. Medium should be working better now.
                                // // To work with the Medium Shipper, after using one extra box, define the next extra box to use as the default accessory box (so we don't get multiple medium shippers)
                                // nextBox = "Accessory Box (13x10x5)";
                                // nextBoxValue = packingItem.boxAccessories;


                                // DEBUGGING to show info every time a single item is packed (1 line)
                                if (valueDebug == 1) {
                                    outputString = outputString + "<br> DEBUGGING INFO: itemsTotalLeft = " + itemsTotalLeft + ".  boxValueLeft = " + boxValueLeft + ".  totalValueCurrentItem = " + totalValueCurrentItem + ".  spaceSingleCurrentItem = " + spaceSingleCurrentItem + ".  totalValueCurrent = " + totalValueCurrent + "<br>";
                                }

                                loopCount++;
                                loopCountElse++;
                                if (loopCountElse >= 60) {
                                    outputString = outputString + "<br><b><span style='color:red;'>WARNING:</span> I tried packing this item into a new box " + loopCount + " different times and gave up </b><br>(Actually what might be happening is this loop just stops after packing " + loopCount + " boxes with the same item, to avoid getting stuck in a possible infinite loop. If you really need this many boxes, just increase the value for this IF statement condition.)<br>";
                                    break;
                                }
                                // break;
                            }
                            // Added extra breaks cuz the else loop kept running even after breaking out of it. I guess I didn't break enough to get out of the while loop.
                            // Maybe removed the break here so the outputString line below would still work?
                            // break;
                        }

                        // Display how many of this item has been packed into the box, before exiting while loop
                        outputString = outputString + "‚Ä¢ " + currentItemCountInBoxOfCurrentItem + " " + currentItemName + "<br>";

                        // Show the weight at the end of the final box (if the total number of items left to pack is 0 or less). (it was only showing weight when starting packing another box)
                        // (Moved this to the end of this function, where it's outputting the line for the items packed)
                        if (itemsTotalLeft <= 0) {
                            // Only show weight if there was more than 0 items to pack
                            if (valueTotal > 0 || valueLds > 0) {
                                // Add the box/packaging weight to the total
                                // Add the box/packaging weight to the total
                                weightCurrentBox += boxWeightSingle;
                                weightTotal += boxWeightSingle;
                                outputString += " <div class='weightCurrentBox text-muted'><i> &nbsp;  &nbsp;  &nbsp;  &nbsp; (approximate box weight: " + parseFloat((weightCurrentBox).toFixed(0)) + " lbs)</i><br></div>";
                                // DEBUGGING to show info every time a single item is packed (1 line)
                                if (valueDebug >= 1) {
                                    outputString = outputString + "<br> DEBUGGING INFO: weight2  itemsTotalLeft = " + itemsTotalLeft + ".  boxValueLeft = " + boxValueLeft + ".  totalValueCurrentItem = " + totalValueCurrentItem + ".  spaceSingleCurrentItem = " + spaceSingleCurrentItem + ".  totalValueCurrent = " + totalValueCurrent + ". weightCurrentBox = " + weightCurrentBox + "<br>";
                                }
                            }
                            else {
                                outputString += "<br><i>Nothing to pack?</i><br>&nbsp;";
                            }
                        }
                    }
                }










                // FUNCTION:  Call item packing function (above), for each item
                // FORMAT:  (valueCurrentItem, spaceSingleCurrentItem, totalValueCurrentItem, currentItemName)
                // TODO:  Maybe wrap each in an IF statement to avoid calling the function every time even with 0 items from that type

                // Pack  API
                // Don't need an  if > 0  statement since it's included in the referenced function
                putInBox(valueApi, packingItem.api, "packingItem.api", totalValueApi, "API");


                // Pack  POLD (w/pins)
                // Use normal POLD input value (valuePold), if no leak rope
                if (valueLeakRopeCheck == 0) {
                    putInBox(valuePold, packingItem.pold, "packingItem.pold", totalValuePold, "POLD");
                }
                // Use POLD with pins input value (valuePoldPin), if leak rope
                else if (valueLeakRopeCheck == 1) {
                    putInBox(valuePoldPin, packingItem.poldPin, "packingItem.poldPin", totalValuePoldPin, "POLD (with pins)");
                }
                else {
                    window.alert("The value for the leak rope checkbox is not 1 or 0, so no POLDs or leak rope got packed. Gotta fix this IF statement or the function that changes checkbox value to 1 or 0.\nvalueLeakRopeCheck = " + valueLeakRopeCheck)
                }

                // Pack  POLD with Leak Rope (2ft)
                putInBox(valuePoldLeakRope2ft, packingItem.poldLeakRope2ft, "packingItem.poldLeakRope2ft", totalValuePoldLeakRope2ft, "POLD with Leak Rope (2ft)");
                // Pack  POLD with Leak Rope (5ft)
                putInBox(valuePoldLeakRope5ft, packingItem.poldLeakRope5ft, "packingItem.poldLeakRope5ft", totalValuePoldLeakRope5ft, "POLD with Leak Rope (5ft)");
                // Pack  POLD with Leak Rope (10ft)
                putInBox(valuePoldLeakRope10ft, packingItem.poldLeakRope10ft, "packingItem.poldLeakRope10ft", totalValuePoldLeakRope10ft, "POLD with Leak Rope (10ft)");

                // Pack  Leak Rope (2ft)
                putInBox(valueLeakRope2ft, packingItem.leakRope2ft, "packingItem.leakRope2ft", totalValueLeakRope2ft, "Leak Rope (2ft)");
                // Pack  Leak Rope (5ft)
                putInBox(valueLeakRope5ft, packingItem.leakRope5ft, "packingItem.leakRope5ft", totalValueLeakRope5ft, "Leak Rope (5ft)");
                // Pack  Leak Rope (10ft)
                putInBox(valueLeakRope10ft, packingItem.leakRope10ft, "packingItem.leakRope10ft", totalValueLeakRope10ft, "Leak Rope (10ft)");

                // Pack  Solid State Relay
                // TODO:  "Solid State Relays included with box carrying most POLDs"  (although putting it in the last box a pold or leak rope went into is a lot easier)
                putInBox(valueSsr, packingItem.ssr, "packingItem.ssr", totalValueSsr, "Solid State Relay");

                // Pack  Recirc Pump Switch
                if (valueRecirc > 0) {
                    //// Moved all this nextBox stuff to inside the putInBox function
                    //     // FUNCTION:  Puts the Recirc or Four hour timer into its own box if this is the only overflow item
                    //     if ((valueRecirc == 1 && valueFourHour == 0) && (totalValueCurrent == packingItem.recirc) && (boxValueLeft < packingItem.recirc)) {
                    //         nextBox = "Recirc/Four Hour Box (9x4x3)";
                    //         nextBoxValue = packingItem.boxRecirc;
                    //         nextBoxWeightSingle = packingItemWeight.boxRecirc;


                    //         // Basically copied the ELSE statement from the function about to be called, 
                    //         // to make sure it changes boxes to Medium Shipper before packaging an Insulated Pouch
                    //         // since that's apparently the only box it fits in.
                    //         // But removed the parts about packing an item. (just showing the new box title)


                    //         // Show weight (before new box)
                    //         // Add the box/packaging weight to the total
                    //         weightCurrentBox += boxWeightSingle;
                    //         weightTotal += boxWeightSingle;
                    //         outputString += " <div class='weightCurrentBox text-muted'><i> &nbsp;  &nbsp;  &nbsp;  &nbsp; (approximate box weight: " + parseFloat((weightCurrentBox).toFixed(2)) + " lbs)</i><br></div>";
                    //         // Reset box weight 
                    //         weightCurrentBox = 0;
                    //         // DEBUGGING to show info every time a single item is packed (1 line)
                    //         if (valueDebug >= 1) {
                    //             outputString = outputString + "<br> DEBUGGING INFO: weight4  else (newbox) totalValueCurrent = " + totalValueCurrent + ".  boxValueLeft = " + boxValueLeft + ". weightCurrentBox = " + weightCurrentBox + ". weightSingleCurrentItem = " + weightSingleCurrentItem + "<br>";
                    //         }


                    //         // Change current box to next box
                    //         boxValue = nextBoxValue;
                    //         // Change current box packaging weight to next box packaging weight
                    //         boxWeightSingle = nextBoxWeightSingle;
                    //         // Resets the space remaining in the box to the full total of the new empty box
                    //         boxValueLeft = boxValue;
                    //         // Add 1 to the boxTotal and boxNumber
                    //         boxNumber++;
                    //         boxTotal++;
                    //         // Add item to string to be displayed at the end for what to pack
                    //         // If there's an SO#, add it to the top of the page for each box
                    //         if (valueSoNum > 0) {
                    //             outputString = outputString + "<br><div class='newBoxBefore1'>&nbsp;</div><div class='newBoxBefore2'>&nbsp;</div><div class='newBox'><div class='soBox text-end'><i>SO# " + valueSoNum + "</i></div><b>" + nextBox + "</b><i>&nbsp; [Box " + boxNumber + "<span class='boxTotal'>boxTotal</span>" + "]: </i></div>";
                    //         }
                    //         else {
                    //             outputString = outputString + "<br><div class='newBoxBefore1'>&nbsp;</div><div class='newBoxBefore2'>&nbsp;</div><div class='newBox'><b>" + nextBox + "</b><i>&nbsp; [Box " + boxNumber + "<span class='boxTotal'>boxTotal</span>" + "]: </i></div>";
                    //         }
                    //         // outputString = outputString + "‚Ä¢ " + currentItemCountInBoxOfCurrentItem + " " + currentItemName + "<br>";


                    //         // Pack the item (call the function)
                    //         putInBox(valueRecirc, packingItem.recirc, "packingItem.recirc", totalValueRecirc, "Recirc Pump Switch");

                    //         // Reset nextBox back to accessory box for other items
                    //         nextBox = "Accessory Box (13x10x5)";
                    //         nextBoxValue = packingItem.boxAccessories;
                    //         nextBoxWeightSingle = packingItemWeight.boxAccessories;
                    //     }
                    // // Otherwise pack it as normal
                    // else {
                    // Pack the item (call the function)
                    putInBox(valueRecirc, packingItem.recirc, "packingItem.recirc", totalValueRecirc, "Recirc Pump Switch");
                    // }
                }



                // Pack  Four Hour Timer
                if (valueFourHour > 0) {
                    //// Moved all this nextBox stuff to inside the putInBox function
                    // // FUNCTION:  Puts the Recirc or Four hour timer into its own box if this is the only overflow item
                    // if ((valueRecirc == 0 && valueFourHour == 1) && (totalValueCurrent == packingItem.fourHour) && (boxValueLeft < packingItem.fourHour)) {
                    //     nextBox = "Recirc/Four Hour Box (9x4x3)";
                    //     nextBoxValue = packingItem.boxRecirc;
                    //     nextBoxWeightSingle = packingItemWeight.boxRecirc;


                    //     // Basically copied the ELSE statement from the function about to be called, 
                    //     // to make sure it changes boxes to Medium Shipper before packaging an Insulated Pouch
                    //     // since that's apparently the only box it fits in.
                    //     // But removed the parts about packing an item. (just showing the new box title)


                    //     // Show weight (before new box)
                    //     // Add the box/packaging weight to the total
                    //     weightCurrentBox += boxWeightSingle;
                    //     weightTotal += boxWeightSingle;
                    //     outputString += " <div class='weightCurrentBox text-muted'><i> &nbsp;  &nbsp;  &nbsp;  &nbsp; (approximate box weight: " + parseFloat((weightCurrentBox).toFixed(2)) + " lbs)</i><br></div>";
                    //     // Reset box weight 
                    //     weightCurrentBox = 0;
                    //     // DEBUGGING to show info every time a single item is packed (1 line)
                    //     if (valueDebug >= 1) {
                    //         outputString = outputString + "<br> DEBUGGING INFO: weight4  else (newbox) totalValueCurrent = " + totalValueCurrent + ".  boxValueLeft = " + boxValueLeft + ". weightCurrentBox = " + weightCurrentBox + ". weightSingleCurrentItem = " + weightSingleCurrentItem + "<br>";
                    //     }


                    //     // Change current box to next box
                    //     boxValue = nextBoxValue;
                    //     // Change current box packaging weight to next box packaging weight
                    //     boxWeightSingle = nextBoxWeightSingle;
                    //     // Resets the space remaining in the box to the full total of the new empty box
                    //     boxValueLeft = boxValue;
                    //     // Add 1 to the boxTotal and boxNumber
                    //     boxNumber++;
                    //     boxTotal++;
                    //     // Add item to string to be displayed at the end for what to pack
                    //     // If there's an SO#, add it to the top of the page for each box
                    //     if (valueSoNum > 0) {
                    //         outputString = outputString + "<br><div class='newBoxBefore1'>&nbsp;</div><div class='newBoxBefore2'>&nbsp;</div><div class='newBox'><div class='soBox text-end'><i>SO# " + valueSoNum + "</i></div><b>" + nextBox + "</b><i>&nbsp; [Box " + boxNumber + "<span class='boxTotal'>boxTotal</span>" + "]: </i></div>";
                    //     }
                    //     else {
                    //         outputString = outputString + "<br><div class='newBoxBefore1'>&nbsp;</div><div class='newBoxBefore2'>&nbsp;</div><div class='newBox'><b>" + nextBox + "</b><i>&nbsp; [Box " + boxNumber + "<span class='boxTotal'>boxTotal</span>" + "]: </i></div>";
                    //     }
                    //     // outputString = outputString + "‚Ä¢ " + currentItemCountInBoxOfCurrentItem + " " + currentItemName + "<br>";


                    //     // Pack the item (call the function)
                    //     putInBox(valueFourHour, packingItem.fourHour, "packingItem.fourHour", totalValueFourHour, "Four Hour Timer");

                    //     // Reset nextBox back to accessory box for other items
                    //     nextBox = "Accessory Box (13x10x5)";
                    //     nextBoxValue = packingItem.boxAccessories;
                    // }
                    // // Otherwise pack it as normal
                    // else {
                    // Pack the item (call the function)
                    putInBox(valueFourHour, packingItem.fourHour, "packingItem.fourHour", totalValueFourHour, "Four Hour Timer");
                    // }
                }




                // Pack  Junction Box
                if (valueJuncBox > 0) {
                    //// Moved all this nextBox stuff to inside the putInBox function

                    // // Large Accessory Box (14x14x14) = 48 (Use only if EJB is included or if Point total is greater than or equal to 49) -Bryce
                    // // Might need to reset it back to accessory box afterward
                    // nextBox = "Large Accessory Box (14x14x14)";
                    // nextBoxValue = packingItem.box14x14;
                    // nextBoxWeightSingle = packingItemWeight.box14x14;

                    // Pack the item (call the function)
                    putInBox(valueJuncBox, packingItem.juncBox, "packingItem.juncBox", totalValueJuncBox, "Junction Box");

                    // Reset nextBox back to accessory box for other items
                    nextBox = "Accessory Box (13x10x5)";
                    nextBoxValue = packingItem.boxAccessories;
                    nextBoxWeightSingle = packingItemWeight.boxAccessories;
                }



                // Pack  Insulated Pouch
                if (valueInsulPouch > 0) {
                    // HISTORY: Moved all this nextBox stuff to inside the putInBox function, then moved back since it was packing insulPouch with juncBox (needs to force separate box.)
                    // Just hide all this nextBox stuff if you want to fit insulPouch in other boxes it will fit in

                    // Medium Shipper (20x12x8) = 6 (Used for 2" systems or Insulated Pouch only) -Bryce
                    // NOTE:  Insulated Pouch will always only fit into the medium shipper. -Bryce
                    nextBox = "Medium Shipper (20x12x8)";
                    nextBoxValue = packingItem.boxLdsMedium;
                    nextBoxWeightSingle = packingItemWeight.boxLdsMedium;


                    // Basically copied the ELSE statement from the function about to be called, 
                    // to make sure it changes boxes to Medium Shipper before packaging an Insulated Pouch
                    // since that's apparently the only box it fits in.
                    // But removed the parts about packing an item. (just showing the new box title)


                    // Show weight (before new box)
                    // Add the box/packaging weight to the total
                    weightCurrentBox += boxWeightSingle;
                    weightTotal += boxWeightSingle;
                    outputString += " <div class='weightCurrentBox text-muted'><i> &nbsp;  &nbsp;  &nbsp;  &nbsp; (approximate box weight: " + parseFloat((weightCurrentBox).toFixed(0)) + " lbs)</i><br></div>";
                    // Reset box weight 
                    weightCurrentBox = 0;
                    // DEBUGGING to show info every time a single item is packed (1 line)
                    if (valueDebug >= 1) {
                        outputString = outputString + "<br> DEBUGGING INFO: weight4  else (newbox) totalValueCurrent = " + totalValueCurrent + ".  boxValueLeft = " + boxValueLeft + ". weightCurrentBox = " + weightCurrentBox + ". weightSingleCurrentItem = " + weightSingleCurrentItem + "<br>";
                    }


                    // Change current box to next box
                    boxValue = nextBoxValue;
                    // Change current box packaging weight to next box packaging weight
                    boxWeightSingle = nextBoxWeightSingle;
                    // Resets the space remaining in the box to the full total of the new empty box
                    boxValueLeft = boxValue;
                    // Add 1 to the boxTotal and boxNumber
                    boxNumber++;
                    boxTotal++;
                    // Add box name to string to be displayed at the end
                    // If there's an SO#, add it to the top of the page for each box
                    // NOTE:  Added newBoxBefore1 and newBoxBefore2 to fix html2pdf inserting the page break in wrong location (issue with nested divs)
                    if (valueSoNum > 0) {
                        outputString = outputString + "<br><div class='newBoxBefore1'>&nbsp;</div><div class='newBoxBefore2'>&nbsp;</div><div class='newBox'><div class='soBox text-end'><i>SO# " + valueSoNum + "</i></div><b>" + nextBox + "</b><i>&nbsp; [Box " + boxNumber + "<span class='boxTotal'>boxTotal</span>" + "]: </i></div>";
                    }
                    else {
                        outputString = outputString + "<br><div class='newBoxBefore1'>&nbsp;</div><div class='newBoxBefore2'>&nbsp;</div><div class='newBox'><b>" + nextBox + "</b><i>&nbsp; [Box " + boxNumber + "<span class='boxTotal'>boxTotal</span>" + "]: </i></div>";
                    }
                    // outputString = outputString + "‚Ä¢ " + currentItemCountInBoxOfCurrentItem + " " + currentItemName + "<br>";


                    // Pack the item (call the function)
                    putInBox(valueInsulPouch, packingItem.insulPouch, "packingItem.insulPouch", totalValueInsulPouch, "Insulated Pouch");

                    // Reset nextBox back to accessory box for other items
                    nextBox = "Accessory Box (13x10x5)";
                    nextBoxValue = packingItem.boxAccessories;
                    nextBoxWeightSingle = packingItemWeight.boxAccessories;
                }








                if (itemsTotalLeft > 0) {
                    // Add item to string to be displayed at the end for what to pack
                    outputString = outputString + "<br> <b><span style='color:red;'>WARNING: </span>Hmm there seems to be something left over.</b> Did I forget something in my calculations?<br> Contact jake and tell him you'll give him an ice cream if he fixes it.<br> DEBUGGING INFO (for leftovers): totalValueTotal = " + totalValueTotal + ". itemsTotalLeft = " + itemsTotalLeft;
                }



                // For debugging (level 1)
                // TODO:  Maybe add level 1 and level 2 debugging levels, for basic info like these 2 lines, versus a line after each and every item is packed
                if (valueDebug == 1) {
                    outputString = outputString + "<br><br> DEBUGGING INFO: last boxValue = " + boxValue + ".  boxValueLeft = " + boxValueLeft;
                    outputString = outputString + "<br> DEBUGGING INFO: totalValueTotal = " + totalValueTotal + ".  itemsTotalLeft = " + itemsTotalLeft;
                }

                return outputString;
            }


            // THE FINAL CODE RUN TO SHOW RESULTS OUTPUT IS IN THE BLOCK ABOVE/BEFORE THIS FUNCTION, NOT HERE


        }









        /// SAVE/PRINT BUTTON (using addEventListener instead of onclick)
        // FUNCTION: Add variable for which button was clicked (can't easily pass argument with addEventListener)
        var whichButtonClicked;
        document.getElementById("saveButton").addEventListener("click", saveButtonClicked);
        document.getElementById("printButton").addEventListener("click", printButtonClicked);
        function saveButtonClicked() {
            whichButtonClicked = "save";
        };
        function printButtonClicked() {
            whichButtonClicked = "print";
        };

        // FUNCTION: Form validation for SO# (if printing more than 1 box)
        // Only when clicking save/print
        document.getElementById("saveButton").addEventListener("click", functionOnPrint);
        document.getElementById("printButton").addEventListener("click", functionOnPrint);
        function functionOnPrint() {
            // var value2SoNum = Number(document.getElementById("inputSoNum").value);


            var idSoNum = document.getElementById("inputSoNum");
            // Variable called value2SoNum to avoid conflict with valueSoNum in the onsubmit function (which isn't accessible here, and putting the variable outside the function might return the value before it's entered...)
            var value2SoNum = Number(idSoNum.value);
            // Only validate if a SO# is present if you have more than 1 box
            if (boxTotal >= 2) {
                // If SO# has a value
                if (value2SoNum > 0) {
                    // window.alert("Nice. \n value2SoNum = " + value2SoNum);

                    // FUNCTION: IF statements to decide whether to print or save
                    if (whichButtonClicked == "print") {
                        window.print();
                    }
                    else if (whichButtonClicked == "save") {
                        html2pdfAndPrintCss();
                    }
                    else {
                        window.alert("ERROR: It appears the save or print button was clicked but the whichButtonClicked variable is not either of those options.")
                    }
                }
                // If SO# doesn't have a value
                else {
                    // window.alert("boo. \n value2SoNum = " + value2SoNum);

                    // FUNCTION:  Shows an Ok/Cancel popup
                    // SOURCE:  https://stackoverflow.com/a/9334679
                    var answer = window.confirm("ALERT:\nSO# is required when printing labels with more than 1 box.\n\nPlease click Ok then enter Sales Order Number (SO#)");
                    // If they click Ok
                    if (answer) {
                        // Go back to form
                        showMainPage();
                    }
                    // If they click Cancel
                    else {
                        // Otherwise just continue to printing)

                        // FUNCTION: IF statements to decide whether to print or save
                        if (whichButtonClicked == "print") {
                            window.print();
                        }
                        else if (whichButtonClicked == "save") {
                            html2pdfAndPrintCss();
                        }
                        else {
                            window.alert("ERROR: It appears the save or print button was clicked but the whichButtonClicked variable is not either of those options.")
                        }
                    }
                }
            }
            // If not more than 1 box
            else {
                // No SO# needed, so proceed

                // FUNCTION: IF statements to decide whether to print or save
                if (whichButtonClicked == "print") {
                    window.print();
                }
                else if (whichButtonClicked == "save") {
                    html2pdfAndPrintCss();
                }
                else {
                    window.alert("ERROR: It appears the save or print button was clicked but the whichButtonClicked variable is not either of those options.")
                }
            }
        }



    </script>

</body>

</html>